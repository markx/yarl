var $jscomp = {};
var shadow$provide = {};
(function(){
shadow$provide[0]=function(r,X,R,S){function v(){throw Error("setTimeout has not been defined");}function q(){throw Error("clearTimeout has not been defined");}function G(n){if(z===setTimeout)return setTimeout(n,0);if((z===v||!z)&&setTimeout)return z=setTimeout,setTimeout(n,0);try{return z(n,0)}catch(ma){try{return z.call(null,n,0)}catch(na){return z.call(this,n,0)}}}function n(n){if(E===clearTimeout)return clearTimeout(n);if((E===q||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(n);try{return E(n)}catch(ma){try{return E.call(null,
n)}catch(na){return E.call(this,n)}}}function oa(){H&&F&&(H=!1,F.length?D=F.concat(D):I=-1,D.length&&O())}function O(){if(!H){var q=G(oa);H=!0;for(var r=D.length;r;){F=D;for(D=[];++I<r;)F&&F[I].run();I=-1;r=D.length}F=null;H=!1;n(q)}}function T(n,q){this.fun=n;this.array=q}function C(){}r=R.exports={};try{var z="function"===typeof setTimeout?setTimeout:v}catch(Y){z=v}try{var E="function"===typeof clearTimeout?clearTimeout:q}catch(Y){E=q}var D=[],H=!1,F,I=-1;r.nextTick=function(n){var q=Array(arguments.length-
1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)q[r-1]=arguments[r];D.push(new T(n,q));1!==D.length||H||G(O)};T.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=!0;r.env={};r.argv=[];r.version="";r.versions={};r.on=C;r.addListener=C;r.once=C;r.off=C;r.removeListener=C;r.removeAllListeners=C;r.emit=C;r.prependListener=C;r.prependOnceListener=C;r.listeners=function(n){return[]};r.binding=function(n){throw Error("process.binding is not supported");};r.cwd=
function(){return"/"};r.chdir=function(n){throw Error("process.chdir is not supported");};r.umask=function(){return 0}};
shadow$provide[1]=function(r,X,R,S){function v(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function q(n,q){n.prototype=Object.create(q.prototype);n.prototype.constructor=n;n.__proto__=q}var G=X(0);(function(n,q){"object"===typeof S&&"undefined"!==typeof R?q(S):"function"===typeof define&&define.amd?define(["exports"],q):q(n.ROT={})})(this,function(n){function r(d,c){return(d%c+c)%c}function O(d,c,a){void 0===c&&(c=0);void 0===a&&
(a=1);return d<c?c:d>a?a:d}function T(d){return d.charAt(0).toUpperCase()+d.substring(1)}function C(d){for(var c=arguments.length,a=Array(1<c?c-1:0),b=1;b<c;b++)a[b-1]=arguments[b];var e=C.map;return d.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,function(b,k,h,g){if("%"==d.charAt(g-1))return b.substring(1);if(!a.length)return b;h=(k||h).split(",");k=h.shift()||"";g=e[k.toLowerCase()];if(!g)return b;b=a.shift();b=b[g].apply(b,h);k=k.charAt(0);k!=k.toLowerCase()&&(b=T(b));return b})}function z(d){var c;
if(d in da)var a=da[d];else{if("#"==d.charAt(0))if(a=(d.match(/[0-9a-f]/gi)||[]).map(function(b){return parseInt(b,16)}),3==a.length)a=a.map(function(b){return 17*b});else for(c=0;3>c;c++)a[c+1]+=16*a[c],a.splice(c,1);else a=(c=d.match(/rgb\(([0-9, ]+)\)/i))?c[1].split(/\s*,\s*/).map(function(b){return parseInt(b)}):[0,0,0];da[d]=a}return a.slice()}function E(d){for(var c=arguments.length,a=Array(1<c?c-1:0),b=1;b<c;b++)a[b-1]=arguments[b];for(c=0;3>c;c++)for(b=0;b<a.length;b++)d[c]+=a[b][c];return d}
function D(d,c,a){void 0===a&&(a=.5);for(var b=d.slice(),e=0;3>e;e++)b[e]=Math.round(b[e]+a*(c[e]-d[e]));return b}function H(d,c,a){void 0===a&&(a=.5);d=F(d);c=F(c);for(var b=0;3>b;b++)d[b]+=a*(c[b]-d[b]);return Y(d)}function F(d){var c=d[0]/255,a=d[1]/255;d=d[2]/255;var b=Math.max(c,a,d),e=Math.min(c,a,d),f=0,k=(b+e)/2;if(b==e)e=0;else{var h=b-e;e=.5<k?h/(2-b-e):h/(b+e);switch(b){case c:f=(a-d)/h+(a<d?6:0);break;case a:f=(d-c)/h+2;break;case d:f=(c-a)/h+4}f/=6}return[f,e,k]}function I(d,c,a){0>a&&
(a+=1);1<a&&--a;return a<1/6?d+6*(c-d)*a:.5>a?c:a<2/3?d+(c-d)*(2/3-a)*6:d}function Y(d){var c=d[2];if(0==d[1])return c=Math.round(255*c),[c,c,c];var a=d[1];a=.5>c?c*(1+a):c+a-c*a;var b=2*c-a;c=I(b,a,d[0]+1/3);var e=I(b,a,d[0]);d=I(b,a,d[0]-1/3);return[Math.round(255*c),Math.round(255*e),Math.round(255*d)]}function R(d,c,a){var b=d.createShader(d.VERTEX_SHADER);d.shaderSource(b,c);d.compileShader(b);if(!d.getShaderParameter(b,d.COMPILE_STATUS))throw Error(d.getShaderInfoLog(b)||"");c=d.createShader(d.FRAGMENT_SHADER);
d.shaderSource(c,a);d.compileShader(c);if(!d.getShaderParameter(c,d.COMPILE_STATUS))throw Error(d.getShaderInfoLog(c)||"");a=d.createProgram();d.attachShader(a,b);d.attachShader(a,c);d.linkProgram(a);if(!d.getProgramParameter(a,d.LINK_STATUS))throw Error(d.getProgramInfoLog(a)||"");return a}function S(d){var c=new Float32Array([0,0,1,0,0,1,1,1]),a=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,a);d.bufferData(d.ARRAY_BUFFER,c,d.STATIC_DRAW);d.enableVertexAttribArray(0);d.vertexAttribPointer(0,2,d.FLOAT,
!1,0,0)}function Z(d){if(!(d in ea)){if("transparent"==d)var c=[0,0,0,0];else if(-1<d.indexOf("rgba")){c=(d.match(/[\d.]+/g)||[]).map(Number);for(var a=0;3>a;a++)c[a]/=255}else c=z(d).map(function(b){return b/255}),c.push(1);ea[d]=c}return ea[d]}function fa(d){d=z(d);return 36*Math.floor(.0234375*d[0])+6*Math.floor(.0234375*d[1])+1*Math.floor(.0234375*d[2])+16}function ha(d,c){var a=[],b=0;d.replace(pa,function(e,k,h,g){var f=d.substring(b,g);f.length&&a.push({type:0,value:f});a.push({type:"c"==k?
2:3,value:h.trim()});b=g+e.length;return""});var e=d.substring(b);e.length&&a.push({type:0,value:e});return X(a,c)}function X(d,c){c||(c=Infinity);for(var a=0,b=0,e=-1;a<d.length;){var f=d[a];1==f.type&&(b=0,e=-1);if(0!=f.type)a++;else{for(;0==b&&" "==f.value.charAt(0);)f.value=f.value.substring(1);var k=f.value.indexOf("\n");if(-1!=k){f.value=aa(d,a,k,!0);for(k=f.value.split("");k.length&&" "==k[k.length-1];)k.pop();f.value=k.join("")}if(f.value.length){if(b+f.value.length>c){for(k=-1;;){var h=f.value.indexOf(" ",
k+1);if(-1==h)break;if(b+h>c)break;k=h}-1!=k?f.value=aa(d,a,k,!0):-1!=e?(a=d[e],f=a.value.lastIndexOf(" "),a.value=aa(d,e,f,!0),a=e):f.value=aa(d,a,c-b,!1)}else b+=f.value.length,-1!=f.value.indexOf(" ")&&(e=a);a++}else d.splice(a,1)}}d.push({type:1});c=null;for(b=0;b<d.length;b++)switch(e=d[b],e.type){case 0:c=e;break;case 1:if(c){for(e=c.value.split("");e.length&&" "==e[e.length-1];)e.pop();c.value=e.join("")}c=null}d.pop();return d}function aa(d,c,a,b){b={type:0,value:d[c].value.substring(a+(b?
1:0))};d.splice(c+1,0,{type:1},b);return d[c].value.substring(0,a)}function ja(d,c,a){a[c[d+1]]=a[d];c[a[d]]=c[d+1];a[d]=d+1;c[d+1]=d}function ka(d,c,a){a[c[d]]=a[d];c[a[d]]=c[d];a[d]=d;c[d]=d}var p=(new (function(){function d(){this._c=this._s2=this._s1=this._s0=this._seed=0}var c=d.prototype;c.getSeed=function(){return this._seed};c.setSeed=function(a){this._seed=a=1>a?1/a:a;this._s0=2.3283064365386963E-10*(a>>>0);a=69069*a+1>>>0;this._s1=2.3283064365386963E-10*a;this._s2=2.3283064365386963E-10*
(69069*a+1>>>0);this._c=1;return this};c.getUniform=function(){var a=2091639*this._s0+2.3283064365386963E-10*this._c;this._s0=this._s1;this._s1=this._s2;this._c=a|0;return this._s2=a-this._c};c.getUniformInt=function(a,b){var e=Math.max(a,b);a=Math.min(a,b);return Math.floor(this.getUniform()*(e-a+1))+a};c.getNormal=function(a,b){void 0===a&&(a=0);void 0===b&&(b=1);do{var e=2*this.getUniform()-1;var f=2*this.getUniform()-1;f=e*e+f*f}while(1<f||0==f);return a+e*Math.sqrt(-2*Math.log(f)/f)*b};c.getPercentage=
function(){return 1+Math.floor(100*this.getUniform())};c.getItem=function(a){return a.length?a[Math.floor(this.getUniform()*a.length)]:null};c.shuffle=function(a){var b=[];for(a=a.slice();a.length;){var e=a.indexOf(this.getItem(a));b.push(a.splice(e,1)[0])}return b};c.getWeightedValue=function(a){var b=0;for(f in a)b+=a[f];b*=this.getUniform();var e;var f=0;for(e in a)if(f+=a[e],b<f)break;return e};c.getState=function(){return[this._s0,this._s1,this._s2,this._c]};c.setState=function(a){this._s0=a[0];
this._s1=a[1];this._s2=a[2];this._c=a[3];return this};c.clone=function(){return(new d).setState(this.getState())};return d}())).setSeed(Date.now()),U=function(){function d(){}var c=d.prototype;c.getContainer=function(){return null};c.setOptions=function(a){this._options=a};return d}(),V=function(d){function c(){var b=d.call(this)||this;b._ctx=document.createElement("canvas").getContext("2d");return b}q(c,d);var a=c.prototype;a.schedule=function(b){requestAnimationFrame(b)};a.getContainer=function(){return this._ctx.canvas};
a.setOptions=function(b){d.prototype.setOptions.call(this,b);b=(b.fontStyle?b.fontStyle+" ":"")+" "+b.fontSize+"px "+b.fontFamily;this._ctx.font=b;this._updateSize();this._ctx.font=b;this._ctx.textAlign="center";this._ctx.textBaseline="middle"};a.clear=function(){this._ctx.fillStyle=this._options.bg;this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)};a.eventToPosition=function(b,e){var f=this._ctx.canvas,a=f.getBoundingClientRect();b-=a.left;e-=a.top;b*=f.width/a.width;e*=f.height/
a.height;return 0>b||0>e||b>=f.width||e>=f.height?[-1,-1]:this._normalizedEventToPosition(b,e)};return c}(U);C.map={s:"toString"};var qa=Object.freeze({mod:r,clamp:O,capitalize:T,format:C}),ba=function(d){function c(){var b=d.call(this)||this;b._spacingX=0;b._spacingY=0;b._hexSize=0;return b}q(c,d);var a=c.prototype;a.draw=function(b,e){var f=b[2],a=b[3],h=b[4];b=[(b[0]+1)*this._spacingX,b[1]*this._spacingY+this._hexSize];this._options.transpose&&b.reverse();e&&(this._ctx.fillStyle=h,this._fill(b[0],
b[1]));if(f)for(this._ctx.fillStyle=a,e=[].concat(f),f=0;f<e.length;f++)this._ctx.fillText(e[f],b[0],Math.ceil(b[1]))};a.computeSize=function(b,e){this._options.transpose&&(b+=e,e=b-e,b-=e);return[Math.floor(b/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]};a.computeFontSize=function(b,e){this._options.transpose&&(b+=e,e=b-e,b-=e);b=Math.min(2*b/((this._options.width+1)*Math.sqrt(3))-1,e/(2+1.5*(this._options.height-1)));e=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;
var f=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=e;b=Math.floor(b)+1;return Math.ceil(2*b/(this._options.spacing*(1+f/100/Math.sqrt(3))))-1};a._normalizedEventToPosition=function(b,e){if(this._options.transpose){b+=e;e=b-e;b-=e;var f=this._ctx.canvas.width}else f=this._ctx.canvas.height;e=Math.floor(e/(f/this._options.height));r(e,2)?(b-=this._spacingX,b=1+2*Math.floor(b/(2*this._spacingX))):b=2*Math.floor(b/(2*this._spacingX));return[b,e]};a._fill=function(b,e){var f=this._hexSize,
a=this._options.border,h=this._ctx;h.beginPath();this._options.transpose?(h.moveTo(b-f+a,e),h.lineTo(b-f/2+a,e+this._spacingX-a),h.lineTo(b+f/2-a,e+this._spacingX-a),h.lineTo(b+f-a,e),h.lineTo(b+f/2-a,e-this._spacingX+a),h.lineTo(b-f/2+a,e-this._spacingX+a),h.lineTo(b-f+a,e)):(h.moveTo(b,e-f+a),h.lineTo(b+this._spacingX-a,e-f/2+a),h.lineTo(b+this._spacingX-a,e+f/2-a),h.lineTo(b,e+f-a),h.lineTo(b-this._spacingX+a,e+f/2-a),h.lineTo(b-this._spacingX+a,e-f/2+a),h.lineTo(b,e-f+a));h.fill()};a._updateSize=
function(){var b=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._hexSize=Math.floor(b.spacing*(b.fontSize+e/Math.sqrt(3))/2);this._spacingX=this._hexSize*Math.sqrt(3)/2;this._spacingY=1.5*this._hexSize;if(b.transpose){e="height";var f="width"}else e="width",f="height";this._ctx.canvas[e]=Math.ceil((b.width+1)*this._spacingX);this._ctx.canvas[f]=Math.ceil((b.height-1)*this._spacingY+2*this._hexSize)};return c}(V),N=function(d){function c(){var b=d.call(this)||this;b._spacingX=0;b._spacingY=
0;b._canvasCache={};return b}q(c,d);var a=c.prototype;a.setOptions=function(b){d.prototype.setOptions.call(this,b);this._canvasCache={}};a.draw=function(b,e){c.cache?this._drawWithCache(b):this._drawNoCache(b,e)};a._drawWithCache=function(b){var e=b[0],f=b[1],a=b[2],h=b[3],g=b[4];b=""+a+h+g;if(b in this._canvasCache)var c=this._canvasCache[b];else{var d=this._options.border;c=document.createElement("canvas");var t=c.getContext("2d");c.width=this._spacingX;c.height=this._spacingY;t.fillStyle=g;t.fillRect(d,
d,c.width-d,c.height-d);if(a)for(t.fillStyle=h,t.font=this._ctx.font,t.textAlign="center",t.textBaseline="middle",a=[].concat(a),h=0;h<a.length;h++)t.fillText(a[h],this._spacingX/2,Math.ceil(this._spacingY/2));this._canvasCache[b]=c}this._ctx.drawImage(c,e*this._spacingX,f*this._spacingY)};a._drawNoCache=function(b,e){var f=b[0],a=b[1],h=b[2],g=b[3];b=b[4];e&&(e=this._options.border,this._ctx.fillStyle=b,this._ctx.fillRect(f*this._spacingX+e,a*this._spacingY+e,this._spacingX-e,this._spacingY-e));
if(h)for(this._ctx.fillStyle=g,h=[].concat(h),g=0;g<h.length;g++)this._ctx.fillText(h[g],(f+.5)*this._spacingX,Math.ceil((a+.5)*this._spacingY))};a.computeSize=function(b,e){return[Math.floor(b/this._spacingX),Math.floor(e/this._spacingY)]};a.computeFontSize=function(b,e){b=Math.floor(b/this._options.width);e=Math.floor(e/this._options.height);var f=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;var a=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=f;b=a/100*e/b;1<b&&(e=
Math.floor(e/b));return Math.floor(e/this._options.spacing)};a._normalizedEventToPosition=function(b,e){return[Math.floor(b/this._spacingX),Math.floor(e/this._spacingY)]};a._updateSize=function(){var b=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(b.spacing*e);this._spacingY=Math.ceil(b.spacing*b.fontSize);b.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY));this._ctx.canvas.width=b.width*this._spacingX;this._ctx.canvas.height=
b.height*this._spacingY};return c}(V);N.cache=!1;var J=function(d){function c(){var b=d.call(this)||this;b._colorCanvas=document.createElement("canvas");return b}q(c,d);var a=c.prototype;a.draw=function(b,e){var f=b[0],a=b[1],h=b[2],g=b[3],c=b[4];b=this._options.tileWidth;var d=this._options.tileHeight;e&&(this._options.tileColorize?this._ctx.clearRect(f*b,a*d,b,d):(this._ctx.fillStyle=c,this._ctx.fillRect(f*b,a*d,b,d)));if(h)for(e=[].concat(h),g=[].concat(g),c=[].concat(c),h=0;h<e.length;h++){var t=
this._options.tileMap[e[h]];if(!t)throw Error('Char "'+e[h]+'" not found in tileMap');if(this._options.tileColorize){var A=this._colorCanvas,y=A.getContext("2d");y.globalCompositeOperation="source-over";y.clearRect(0,0,b,d);var p=g[h],n=c[h];y.drawImage(this._options.tileSet,t[0],t[1],b,d,0,0,b,d);"transparent"!=p&&(y.fillStyle=p,y.globalCompositeOperation="source-atop",y.fillRect(0,0,b,d));"transparent"!=n&&(y.fillStyle=n,y.globalCompositeOperation="destination-over",y.fillRect(0,0,b,d));this._ctx.drawImage(A,
f*b,a*d,b,d)}else this._ctx.drawImage(this._options.tileSet,t[0],t[1],b,d,f*b,a*d,b,d)}};a.computeSize=function(b,e){return[Math.floor(b/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};a.computeFontSize=function(){throw Error("Tile backend does not understand font size");};a._normalizedEventToPosition=function(b,e){return[Math.floor(b/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};a._updateSize=function(){var b=this._options;this._ctx.canvas.width=b.width*b.tileWidth;
this._ctx.canvas.height=b.height*b.tileHeight;this._colorCanvas.width=b.tileWidth;this._colorCanvas.height=b.tileHeight};return c}(V),da={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,
139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,
128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,
251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,
30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,
96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,
192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]};V=Object.freeze({fromString:z,add:function(d){for(var c=d.slice(),a=arguments.length,
b=Array(1<a?a-1:0),e=1;e<a;e++)b[e-1]=arguments[e];for(a=0;3>a;a++)for(e=0;e<b.length;e++)c[a]+=b[e][a];return c},add_:E,multiply:function(d){for(var c=d.slice(),a=arguments.length,b=Array(1<a?a-1:0),e=1;e<a;e++)b[e-1]=arguments[e];for(a=0;3>a;a++){for(e=0;e<b.length;e++)c[a]*=b[e][a]/255;c[a]=Math.round(c[a])}return c},multiply_:function(d){for(var c=arguments.length,a=Array(1<c?c-1:0),b=1;b<c;b++)a[b-1]=arguments[b];for(c=0;3>c;c++){for(b=0;b<a.length;b++)d[c]*=a[b][c]/255;d[c]=Math.round(d[c])}return d},
interpolate:D,lerp:D,interpolateHSL:H,lerpHSL:H,randomize:function(d,c){c instanceof Array||(c=Math.round(p.getNormal(0,c)));d=d.slice();for(var a=0;3>a;a++)d[a]+=c instanceof Array?Math.round(p.getNormal(0,c[a])):c;return d},rgb2hsl:F,hsl2rgb:Y,toRGB:function(d){return"rgb("+d.map(function(c){return O(c,0,255)}).join(",")+")"},toHex:function(d){return"#"+d.map(function(c){return O(c,0,255).toString(16).padStart(2,"0")}).join("")}});var x=function(d){function c(){var b=d.call(this)||this;b._uniforms=
{};try{b._gl=b._initWebGL()}catch(e){alert(e.message)}return b}q(c,d);c.isSupported=function(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})};var a=c.prototype;a.schedule=function(b){requestAnimationFrame(b)};a.getContainer=function(){return this._gl.canvas};a.setOptions=function(b){var e=this;d.prototype.setOptions.call(this,b);this._updateSize();var f=this._options.tileSet;f&&"complete"in f&&!f.complete?f.addEventListener("load",function(){return e._updateTexture(f)}):
this._updateTexture(f)};a.draw=function(b,e){var f=this._gl,a=this._options,h=b[0],g=b[1],c=b[2],d=b[3];b=b[4];f.scissor(h*a.tileWidth,f.canvas.height-(g+1)*a.tileHeight,a.tileWidth,a.tileHeight);e&&(a.tileColorize?f.clearColor(0,0,0,0):f.clearColor.apply(f,Z(b)),f.clear(f.COLOR_BUFFER_BIT));if(c)for(e=[].concat(c),c=[].concat(b),d=[].concat(d),f.uniform2fv(this._uniforms.targetPosRel,[h,g]),h=0;h<e.length;h++){g=this._options.tileMap[e[h]];if(!g)throw Error('Char "'+e[h]+'" not found in tileMap');
f.uniform1f(this._uniforms.colorize,a.tileColorize?1:0);f.uniform2fv(this._uniforms.tilesetPosAbs,g);a.tileColorize&&(f.uniform4fv(this._uniforms.tint,Z(d[h])),f.uniform4fv(this._uniforms.bg,Z(c[h])));f.drawArrays(f.TRIANGLE_STRIP,0,4)}};a.clear=function(){var b=this._gl;b.clearColor.apply(b,Z(this._options.bg));b.scissor(0,0,b.canvas.width,b.canvas.height);b.clear(b.COLOR_BUFFER_BIT)};a.computeSize=function(b,e){return[Math.floor(b/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};
a.computeFontSize=function(){throw Error("Tile backend does not understand font size");};a.eventToPosition=function(b,e){var f=this._gl.canvas,a=f.getBoundingClientRect();b-=a.left;e-=a.top;b*=f.width/a.width;e*=f.height/a.height;return 0>b||0>e||b>=f.width||e>=f.height?[-1,-1]:this._normalizedEventToPosition(b,e)};a._initWebGL=function(){var b=this,e=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=e;var f=R(e,ra,sa);e.useProgram(f);S(e);ta.forEach(function(a){return b._uniforms[a]=
e.getUniformLocation(f,a)});this._program=f;e.enable(e.BLEND);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);e.enable(e.SCISSOR_TEST);return e};a._normalizedEventToPosition=function(b,e){return[Math.floor(b/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};a._updateSize=function(){var b=this._gl,e=this._options,a=[e.width*e.tileWidth,e.height*e.tileHeight];b.canvas.width=a[0];b.canvas.height=a[1];b.viewport(0,0,a[0],a[1]);b.uniform2fv(this._uniforms.tileSize,
[e.tileWidth,e.tileHeight]);b.uniform2fv(this._uniforms.targetSize,a)};a._updateTexture=function(b){var e=this._gl,a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,b)};return c}(U),
ta="targetPosRel tilesetPosAbs tileSize targetSize colorize bg tint".split(" "),ra="#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx \x3d (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc \x3d ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *\x3d -1.0;\n\n\tgl_Position \x3d vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx \x3d tilesetPosAbs + tilePosRel * tileSize;\n}",
sa="#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor \x3d vec4(0, 0, 0, 1);\n\n\tvec4 texel \x3d texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb \x3d tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb \x3d texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a \x3d texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor \x3d texel;\n\t}\n}",
ea={},u=function(d){function c(){var b=d.call(this)||this;b._offset=[0,0];b._cursor=[-1,-1];b._lastColor="";return b}q(c,d);var a=c.prototype;a.schedule=function(b){setTimeout(b,1E3/60)};a.setOptions=function(b){d.prototype.setOptions.call(this,b);var e=[b.width,b.height];this._offset=this.computeSize().map(function(b,a){return Math.floor((b-e[a])/2)})};a.clear=function(){G.stdout.write("[0;48;5;"+fa(this._options.bg)+"m[2J")};a.draw=function(b,e){var a=b[2],k=b[3],h=b[4],c=this._offset[0]+b[0],
d=this._offset[1]+b[1];b=this.computeSize();if(!(0>c||c>=b[0]||0>d||d>=b[1])){if(c!==this._cursor[0]||d!==this._cursor[1])G.stdout.write("["+(d+1)+";"+(c+1)+"H"),this._cursor[0]=c,this._cursor[1]=d;e&&(a||(a=" "));a&&(e="[0;38;5;"+fa(k)+";48;5;"+fa(h)+"m",e!==this._lastColor&&(G.stdout.write(e),this._lastColor=e),a=[].concat(a),G.stdout.write(a[0]),this._cursor[0]++,this._cursor[0]>=b[0]&&(this._cursor[0]=0,this._cursor[1]++))}};a.computeFontSize=function(){throw Error("Terminal backend has no notion of font size");
};a.eventToPosition=function(b,e){return[b,e]};a.computeSize=function(){return[G.stdout.columns,G.stdout.rows]};return c}(U),pa=/%([bc]){([^}]*)}/g;U=Object.freeze({TYPE_TEXT:0,TYPE_NEWLINE:1,TYPE_FG:2,TYPE_BG:3,measure:function(d,c){var a={width:0,height:1};d=ha(d,c);for(var b=c=0;b<d.length;b++){var e=d[b];switch(e.type){case 0:c+=e.value.length;break;case 1:a.height++,a.width=Math.max(a.width,c),c=0}}a.width=Math.max(a.width,c);return a},tokenize:ha});var w={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,
-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},ua={hex:ba,rect:N,tile:J,"tile-gl":x,term:u},va={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1},P=function(){function d(a){void 0===a&&(a={});this._data={};this._dirty=!1;this._options={};a=Object.assign({},va,a);this.setOptions(a);
this.DEBUG=this.DEBUG.bind(this);this._tick=this._tick.bind(this);this._backend.schedule(this._tick)}var c=d.prototype;c.DEBUG=function(a,b,e){var f=[this._options.bg,this._options.fg];this.draw(a,b,null,null,f[e%f.length])};c.clear=function(){this._data={};this._dirty=!0};c.setOptions=function(a){Object.assign(this._options,a);if(a.width||a.height||a.fontSize||a.fontFamily||a.spacing||a.layout)a.layout&&(this._backend=new ua[a.layout]),this._backend.setOptions(this._options),this._dirty=!0;return this};
c.getOptions=function(){return this._options};c.getContainer=function(){return this._backend.getContainer()};c.computeSize=function(a,b){return this._backend.computeSize(a,b)};c.computeFontSize=function(a,b){return this._backend.computeFontSize(a,b)};c.computeTileSize=function(a,b){return[Math.floor(a/this._options.width),Math.floor(b/this._options.height)]};c.eventToPosition=function(a){if("touches"in a){var b=a.touches[0].clientX;a=a.touches[0].clientY}else b=a.clientX,a=a.clientY;return this._backend.eventToPosition(b,
a)};c.draw=function(a,b,e,f,k){f||(f=this._options.fg);k||(k=this._options.bg);var h=a+","+b;this._data[h]=[a,b,e,f,k];!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[h]=!0)};c.drawText=function(a,b,e,f){var k=null,h=null,c=a,d=1;f||(f=this._options.width-a);for(e=ha(e,f);e.length;)switch(f=e.shift(),f.type){case 0:for(var m,t=!1,A,y=!1,p=0;p<f.value.length;p++){m=f.value.charCodeAt(p);var n=f.value.charAt(p);A=65280<m&&65377>m||65500<m&&65512>m||65518<m;m=32==n.charCodeAt(0)||12288==
n.charCodeAt(0);!y||A||m||c++;A&&!t&&c++;this.draw(c++,b,n,k,h);t=m;y=A}break;case 2:k=f.value||null;break;case 3:h=f.value||null;break;case 1:c=a,b++,d++}return d};c._tick=function(){this._backend.schedule(this._tick);if(this._dirty){if(!0===this._dirty){this._backend.clear();for(var a in this._data)this._draw(a,!1)}else for(var b in this._dirty)this._draw(b,!0);this._dirty=!1}};c._draw=function(a,b){a=this._data[a];a[4]!=this._options.bg&&(b=!0);this._backend.draw(a,b)};return d}();P.Rect=N;P.Hex=
ba;P.Tile=J;P.TileGL=x;P.Term=u;ba=function(){function d(a){this._options={words:!1,order:3,prior:.001};Object.assign(this._options,a);this._suffix=this._boundary=String.fromCharCode(0);this._prefix=[];for(a=0;a<this._options.order;a++)this._prefix.push(this._boundary);this._priorValues={};this._priorValues[this._boundary]=this._options.prior;this._data={}}var c=d.prototype;c.clear=function(){this._data={};this._priorValues={}};c.generate=function(){for(var a=[this._sample(this._prefix)];a[a.length-
1]!=this._boundary;)a.push(this._sample(a));return this._join(a.slice(0,-1))};c.observe=function(a){a=this._split(a);for(var b=0;b<a.length;b++)this._priorValues[a[b]]=this._options.prior;a=this._prefix.concat(a).concat(this._suffix);for(b=this._options.order;b<a.length;b++)for(var e=a.slice(b-this._options.order,b),f=a[b],k=0;k<e.length;k++){var h=e.slice(k);this._observeEvent(h,f)}};c.getStats=function(){var a=[],b=Object.keys(this._priorValues).length;b--;a.push("distinct samples: "+b);b=Object.keys(this._data).length;
var e=0,f;for(f in this._data)e+=Object.keys(this._data[f]).length;a.push("dictionary size (contexts): "+b);a.push("dictionary size (events): "+e);return a.join(", ")};c._split=function(a){return a.split(this._options.words?/\s+/:"")};c._join=function(a){return a.join(this._options.words?" ":"")};c._observeEvent=function(a,b){a=this._join(a);a in this._data||(this._data[a]={});a=this._data[a];b in a||(a[b]=0);a[b]++};c._sample=function(a){a=this._backoff(a);a=this._join(a);a=this._data[a];var b={};
if(this._options.prior){for(var e in this._priorValues)b[e]=this._priorValues[e];for(var f in a)b[f]+=a[f]}else b=a;return p.getWeightedValue(b)};c._backoff=function(a){for(a.length>this._options.order?a=a.slice(-this._options.order):a.length<this._options.order&&(a=this._prefix.slice(0,this._options.order-a.length).concat(a));!(this._join(a)in this._data)&&0<a.length;)a=a.slice(1);return a};return d}();var la=function(){function d(){this._time=0;this._events=[];this._eventTimes=[]}var c=d.prototype;
c.getTime=function(){return this._time};c.clear=function(){this._events=[];this._eventTimes=[];return this};c.add=function(a,b){for(var e=this._events.length,f=0;f<this._eventTimes.length;f++)if(this._eventTimes[f]>b){e=f;break}this._events.splice(e,0,a);this._eventTimes.splice(e,0,b)};c.get=function(){if(!this._events.length)return null;var a=this._eventTimes.splice(0,1)[0];if(0<a){this._time+=a;for(var b=0;b<this._eventTimes.length;b++)this._eventTimes[b]-=a}return this._events.splice(0,1)[0]};
c.getEventTime=function(a){a=this._events.indexOf(a);if(-1!=a)return this._eventTimes[a]};c.remove=function(a){a=this._events.indexOf(a);if(-1==a)return!1;this._remove(a);return!0};c._remove=function(a){this._events.splice(a,1);this._eventTimes.splice(a,1)};return d}();x=function(){function d(){this._queue=new la;this._repeat=[];this._current=null}var c=d.prototype;c.getTime=function(){return this._queue.getTime()};c.add=function(a,b){b&&this._repeat.push(a);return this};c.getTimeOf=function(a){return this._queue.getEventTime(a)};
c.clear=function(){this._queue.clear();this._repeat=[];this._current=null;return this};c.remove=function(a){var b=this._queue.remove(a),e=this._repeat.indexOf(a);-1!=e&&this._repeat.splice(e,1);this._current==a&&(this._current=null);return b};c.next=function(){return this._current=this._queue.get()};return d}();N=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);var a=c.prototype;a.add=function(b,e){this._queue.add(b,0);return d.prototype.add.call(this,b,e)};a.next=function(){null!==
this._current&&-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,0);return d.prototype.next.call(this)};return c}(x);J=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);var a=c.prototype;a.add=function(b,e,a){this._queue.add(b,void 0!==a?a:1/b.getSpeed());return d.prototype.add.call(this,b,e)};a.next=function(){this._current&&-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,1/this._current.getSpeed());return d.prototype.next.call(this)};
return c}(x);x=function(d){function c(){var b=d.call(this)||this;b._defaultDuration=1;b._duration=b._defaultDuration;return b}q(c,d);var a=c.prototype;a.add=function(b,e,a){this._queue.add(b,a||this._defaultDuration);return d.prototype.add.call(this,b,e)};a.clear=function(){this._duration=this._defaultDuration;return d.prototype.clear.call(this)};a.remove=function(b){b==this._current&&(this._duration=this._defaultDuration);return d.prototype.remove.call(this,b)};a.next=function(){null!==this._current&&
-1!=this._repeat.indexOf(this._current)&&(this._queue.add(this._current,this._duration||this._defaultDuration),this._duration=this._defaultDuration);return d.prototype.next.call(this)};a.setDuration=function(b){this._current&&(this._duration=b);return this};return c}(x);N={Simple:N,Speed:J,Action:x};u=function(){function d(c,a){void 0===a&&(a={});this._lightPasses=c;this._options=Object.assign({topology:8},a)}d.prototype._getCircle=function(c,a,b){var e=[];switch(this._options.topology){case 4:var f=
1;var k=[0,1];var h=[w[8][7],w[8][1],w[8][3],w[8][5]];break;case 6:h=w[6];f=1;k=[-1,1];break;case 8:h=w[4];f=2;k=[-1,1];break;default:throw Error("Incorrect topology for FOV computation");}c+=k[0]*b;a+=k[1]*b;for(k=0;k<h.length;k++)for(var g=0;g<b*f;g++)e.push([c,a]),c+=h[k][0],a+=h[k][1];return e};return d}();J=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);var a=c.prototype;a.compute=function(b,e,a,k){k(b,e,0,1);if(this._lightPasses(b,e))for(var f=[],c,d,m,t,A,y=1;y<=a;y++)for(var p=
this._getCircle(b,e,y),n=360/p.length,q=0;q<p.length;q++)if(m=p[q][0],t=p[q][1],c=n*(q-.5),d=c+n,A=!this._lightPasses(m,t),this._visibleCoords(Math.floor(c),Math.ceil(d),A,f)&&k(m,t,y,1),2==f.length&&0==f[0]&&360==f[1])return};a._visibleCoords=function(b,e,a,k){if(0>b)return e=this._visibleCoords(0,e,a,k),b=this._visibleCoords(360+b,360,a,k),e||b;for(var f=0;f<k.length&&k[f]<b;)f++;if(f==k.length)return a&&k.push(b,e),!0;var c=0;if(f%2){for(;f<k.length&&k[f]<e;)f++,c++;if(0==c)return!1;a&&(c%2?k.splice(f-
c,c,e):k.splice(f-c,c))}else{for(;f<k.length&&k[f]<e;)f++,c++;if(b==k[f-c]&&1==c)return!1;a&&(c%2?k.splice(f-c,c,b):k.splice(f-c,c,b,e))}return!0};return c}(u);x=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);var a=c.prototype;a.compute=function(b,e,a,c){c(b,e,0,1);if(this._lightPasses(b,e))for(var f=[],k,d,m,t,A,p=1;p<=a;p++)for(var n=this._getCircle(b,e,p),q=n.length,r=0;r<q;r++)if(k=n[r][0],d=n[r][1],t=[r?2*r-1:2*q-1,2*q],A=[2*r+1,2*q],m=!this._lightPasses(k,d),(m=this._checkVisibility(t,
A,m,f))&&c(k,d,p,m),2==f.length&&0==f[0][0]&&f[1][0]==f[1][1])return};a._checkVisibility=function(b,e,a,c){if(b[0]>e[0])return b=this._checkVisibility(b,[b[1],b[1]],a,c),e=this._checkVisibility([0,1],e,a,c),(b+e)/2;for(var f=0,k=!1;f<c.length;){var d=c[f];d=d[0]*b[1]-b[0]*d[1];if(0<=d){0!=d||f%2||(k=!0);break}f++}d=c.length;for(var m=!1;d--;){var t=c[d];t=e[0]*t[1]-t[0]*e[1];if(0<=t){0==t&&d%2&&(m=!0);break}}t=!0;f==d&&(k||m)?t=!1:k&&m&&f+1==d&&d%2?t=!1:f>d&&f%2&&(t=!1);if(!t)return 0;k=d-f+1;if(k%
2)f%2?(d=c[f],d=(e[0]*d[1]-d[0]*e[1])/(d[1]*e[1]),a&&c.splice(f,k,e)):(d=c[d],d=(d[0]*b[1]-b[0]*d[1])/(b[1]*d[1]),a&&c.splice(f,k,b));else if(f%2)m=c[f],d=c[d],d=(d[0]*m[1]-m[0]*d[1])/(m[1]*d[1]),a&&c.splice(f,k);else return a&&c.splice(f,k,b,e),1;return d/((e[0]*b[1]-b[0]*e[1])/(b[1]*e[1]))};return c}(u);var K=[[-1,0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];u=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);var a=c.prototype;a.compute=
function(b,e,a,c){c(b,e,0,1);for(var f=0;f<K.length;f++)this._renderOctant(b,e,K[f],a,c)};a.compute180=function(b,e,a,c,h){h(b,e,0,1);var f=(c-1+8)%8,k=(c+1+8)%8;this._renderOctant(b,e,K[(c-2+8)%8],a,h);this._renderOctant(b,e,K[f],a,h);this._renderOctant(b,e,K[c],a,h);this._renderOctant(b,e,K[k],a,h)};a.compute90=function(b,e,a,c,h){h(b,e,0,1);var f=(c-1+8)%8;this._renderOctant(b,e,K[c],a,h);this._renderOctant(b,e,K[f],a,h)};a._renderOctant=function(b,e,a,c,h){this._castVisibility(b,e,1,1,0,c+1,a[0],
a[1],a[2],a[3],h)};a._castVisibility=function(b,e,a,c,h,d,l,m,t,p,n){if(!(c<h))for(;a<=d;a++){for(var f=-a-1,k=-a,g=!1,A=0;0>=f;){f+=1;var q=b+f*l+k*m,y=e+f*t+k*p,r=(f-.5)/(k+.5),u=(f+.5)/(k-.5);if(!(u>c)){if(r<h)break;f*f+k*k<d*d&&n(q,y,a,1);g?this._lightPasses(q,y)?(g=!1,c=A):A=u:!this._lightPasses(q,y)&&a<d&&(g=!0,this._castVisibility(b,e,a+1,c,r,d,l,m,t,p,n),A=u)}}if(g)break}};return c}(u);J={DiscreteShadowcasting:J,PreciseShadowcasting:x,RecursiveShadowcasting:u};u=function(){function d(c,a){void 0===
c&&(c=80);void 0===a&&(a=25);this._width=c;this._height=a}d.prototype._fillMap=function(c){for(var a=[],b=0;b<this._width;b++){a.push([]);for(var e=0;e<this._height;e++)a[b].push(c)}return a};return d}();x=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);c.prototype.create=function(a){for(var b=this._width-1,e=this._height-1,f=0;f<=b;f++)for(var c=0;c<=e;c++)a(f,c,f&&c&&f<b&&c<e?0:1);return this};return c}(u);var Q=function(d){function c(b,e){b=d.call(this,b,e)||this;b._rooms=
[];b._corridors=[];return b}q(c,d);var a=c.prototype;a.getRooms=function(){return this._rooms};a.getCorridors=function(){return this._corridors};return c}(u),L=function(){},ca=function(d){function c(b,e,a,c,h,g){var f=d.call(this)||this;f._x1=b;f._y1=e;f._x2=a;f._y2=c;f._doors={};void 0!==h&&void 0!==g&&f.addDoor(h,g);return f}q(c,d);c.createRandomAt=function(b,e,a,c,h){var f=h.roomWidth[0],d=h.roomWidth[1],k=p.getUniformInt(f,d);f=h.roomHeight[0];d=h.roomHeight[1];h=p.getUniformInt(f,d);if(1==a)return a=
e-Math.floor(p.getUniform()*h),new this(b+1,a,b+k,a+h-1,b,e);if(-1==a)return a=e-Math.floor(p.getUniform()*h),new this(b-k,a,b-1,a+h-1,b,e);if(1==c)return a=b-Math.floor(p.getUniform()*k),new this(a,e+1,a+k-1,e+h,b,e);if(-1==c)return a=b-Math.floor(p.getUniform()*k),new this(a,e-h,a+k-1,e-1,b,e);throw Error("dx or dy must be 1 or -1");};c.createRandomCenter=function(b,e,a){var f=a.roomWidth[0],c=a.roomWidth[1],d=p.getUniformInt(f,c);f=a.roomHeight[0];c=a.roomHeight[1];a=p.getUniformInt(f,c);b-=Math.floor(p.getUniform()*
d);e-=Math.floor(p.getUniform()*a);return new this(b,e,b+d-1,e+a-1)};c.createRandom=function(b,a,f){var e=f.roomWidth[0],c=f.roomWidth[1],d=p.getUniformInt(e,c);e=f.roomHeight[0];c=f.roomHeight[1];f=p.getUniformInt(e,c);b=b-d-1;a=a-f-1;b=1+Math.floor(p.getUniform()*b);a=1+Math.floor(p.getUniform()*a);return new this(b,a,b+d-1,a+f-1)};var a=c.prototype;a.addDoor=function(b,a){this._doors[b+","+a]=1;return this};a.getDoors=function(b){for(var a in this._doors){var f=a.split(",");b(parseInt(f[0]),parseInt(f[1]))}return this};
a.clearDoors=function(){this._doors={};return this};a.addDoors=function(b){for(var a=this._x1-1,f=this._x2+1,c=this._y1-1,d=this._y2+1,g=a;g<=f;g++)for(var l=c;l<=d;l++)if(g==a||g==f||l==c||l==d)b(g,l)||this.addDoor(g,l);return this};a.debug=function(){console.log("room",this._x1,this._y1,this._x2,this._y2)};a.isValid=function(b,a){for(var e=this._x1-1,c=this._x2+1,d=this._y1-1,g=this._y2+1,l=e;l<=c;l++)for(var m=d;m<=g;m++)if(l==e||l==c||m==d||m==g){if(!b(l,m))return!1}else if(!a(l,m))return!1;return!0};
a.create=function(b){for(var a=this._x1-1,f=this._x2+1,c=this._y1-1,d=this._y2+1,g,l=a;l<=f;l++)for(var m=c;m<=d;m++)g=l+","+m in this._doors?2:l==a||l==f||m==c||m==d?1:0,b(l,m,g)};a.getCenter=function(){return[Math.round((this._x1+this._x2)/2),Math.round((this._y1+this._y2)/2)]};a.getLeft=function(){return this._x1};a.getRight=function(){return this._x2};a.getTop=function(){return this._y1};a.getBottom=function(){return this._y2};return c}(L),ia=function(d){function c(b,a,f,c){var e=d.call(this)||
this;e._startX=b;e._startY=a;e._endX=f;e._endY=c;e._endsWithAWall=!0;return e}q(c,d);c.createRandomAt=function(b,a,f,c,d){d=p.getUniformInt(d.corridorLength[0],d.corridorLength[1]);return new this(b,a,b+f*d,a+c*d)};var a=c.prototype;a.debug=function(){console.log("corridor",this._startX,this._startY,this._endX,this._endY)};a.isValid=function(b,a){var e=this._startX,c=this._startY,d=this._endX-e,g=this._endY-c,l=1+Math.max(Math.abs(d),Math.abs(g));d&&(d/=Math.abs(d));g&&(g/=Math.abs(g));for(var m=
g,t=-d,p=!0,n=0;n<l;n++){var q=e+n*d,r=c+n*g;a(q,r)||(p=!1);b(q+m,r+t)||(p=!1);b(q-m,r-t)||(p=!1);if(!p){l=n;this._endX=q-d;this._endY=r-g;break}}if(0==l||1==l&&b(this._endX+d,this._endY+g))return!1;a=!b(this._endX+d+m,this._endY+g+t);m=!b(this._endX+d-m,this._endY+g-t);this._endsWithAWall=b(this._endX+d,this._endY+g);return(a||m)&&this._endsWithAWall?!1:!0};a.create=function(b){var a=this._startX,f=this._startY,c=this._endX-a,d=this._endY-f,g=1+Math.max(Math.abs(c),Math.abs(d));c&&(c/=Math.abs(c));
d&&(d/=Math.abs(d));for(var l=0;l<g;l++)b(a+l*c,f+l*d,0);return!0};a.createPriorityWalls=function(b){if(this._endsWithAWall){var a=this._endX-this._startX,f=this._endY-this._startY;a&&(a/=Math.abs(a));f&&(f/=Math.abs(f));var c=f,d=-a;b(this._endX+a,this._endY+f);b(this._endX+c,this._endY+d);b(this._endX-c,this._endY-d)}};return c}(L);L=function(d){function c(b,a,f){b=d.call(this,b,a)||this;b._options={roomWidth:[3,9],roomHeight:[3,5],roomDugPercentage:.1,timeLimit:1E3};Object.assign(b._options,f);
b._map=[];b._dug=0;b._roomAttempts=20;b._corridorAttempts=20;b._connected=[];b._unconnected=[];b._digCallback=b._digCallback.bind(v(v(b)));b._canBeDugCallback=b._canBeDugCallback.bind(v(v(b)));b._isWallCallback=b._isWallCallback.bind(v(v(b)));return b}q(c,d);var a=c.prototype;a.create=function(b){for(var a=Date.now();;){if(Date.now()-a>this._options.timeLimit)return null;this._map=this._fillMap(1);this._dug=0;this._rooms=[];this._unconnected=[];this._generateRooms();if(!(2>this._rooms.length)&&this._generateCorridors())break}if(b)for(a=
0;a<this._width;a++)for(var f=0;f<this._height;f++)b(a,f,this._map[a][f]);return this};a._generateRooms=function(){var b=this._width-2,a=this._height-2;do{var f=this._generateRoom();if(this._dug/(b*a)>this._options.roomDugPercentage)break}while(f)};a._generateRoom=function(){for(var b=0;b<this._roomAttempts;){b++;var a=ca.createRandom(this._width,this._height,this._options);if(a.isValid(this._isWallCallback,this._canBeDugCallback))return a.create(this._digCallback),this._rooms.push(a),a}return null};
a._generateCorridors=function(){for(var b=0;b<this._corridorAttempts;){b++;this._corridors=[];this._map=this._fillMap(1);for(var a=0;a<this._rooms.length;a++){var f=this._rooms[a];f.clearDoors();f.create(this._digCallback)}this._unconnected=p.shuffle(this._rooms.slice());this._connected=[];for(this._unconnected.length&&this._connected.push(this._unconnected.pop());;){a=p.getItem(this._connected);if(!a)break;a=this._closestRoom(this._unconnected,a);if(!a)break;f=this._closestRoom(this._connected,a);
if(!f)break;if(!this._connectRooms(a,f))break;if(!this._unconnected.length)return!0}}return!1};a._closestRoom=function(b,a){var e=Infinity;a=a.getCenter();for(var c=null,d=0;d<b.length;d++){var g=b[d],l=g.getCenter(),m=l[0]-a[0];l=l[1]-a[1];m=m*m+l*l;m<e&&(e=m,c=g)}return c};a._connectRooms=function(b,a){var e=b.getCenter(),c=a.getCenter(),d=c[0]-e[0];e=c[1]-e[1];if(Math.abs(d)<Math.abs(e)){d=0<e?2:0;var g=(d+2)%4;var l=a.getLeft();var m=a.getRight();e=0}else d=0<d?1:3,g=(d+2)%4,l=a.getTop(),m=a.getBottom(),
e=1;d=this._placeInWall(b,d);if(!d)return!1;if(d[e]>=l&&d[e]<=m){c=d.slice();l=0;switch(g){case 0:l=a.getTop()-1;break;case 1:l=a.getRight()+1;break;case 2:l=a.getBottom()+1;break;case 3:l=a.getLeft()-1}c[(e+1)%2]=l;this._digLine([d,c])}else if(d[e]<l-1||d[e]>m+1){c=d[e]-c[e];l=0;switch(g){case 0:case 1:l=0>c?3:1;break;case 2:case 3:l=0>c?1:3}c=this._placeInWall(a,(g+l)%4);if(!c)return!1;g=[0,0];g[e]=d[e];e=(e+1)%2;g[e]=c[e];this._digLine([d,g,c])}else{l=(e+1)%2;c=this._placeInWall(a,g);if(!c)return!1;
g=Math.round((c[l]+d[l])/2);m=[0,0];var t=[0,0];m[e]=d[e];m[l]=g;t[e]=c[e];t[l]=g;this._digLine([d,m,t,c])}b.addDoor(d[0],d[1]);a.addDoor(c[0],c[1]);e=this._unconnected.indexOf(b);-1!=e&&(this._unconnected.splice(e,1),this._connected.push(b));e=this._unconnected.indexOf(a);-1!=e&&(this._unconnected.splice(e,1),this._connected.push(a));return!0};a._placeInWall=function(b,a){var e=[0,0],c=[0,0],d=0;switch(a){case 0:c=[1,0];e=[b.getLeft(),b.getTop()-1];d=b.getRight()-b.getLeft()+1;break;case 1:c=[0,
1];e=[b.getRight()+1,b.getTop()];d=b.getBottom()-b.getTop()+1;break;case 2:c=[1,0];e=[b.getLeft(),b.getBottom()+1];d=b.getRight()-b.getLeft()+1;break;case 3:c=[0,1],e=[b.getLeft()-1,b.getTop()],d=b.getBottom()-b.getTop()+1}b=[];a=-2;for(var g=0;g<d;g++){var l=e[0]+g*c[0],m=e[1]+g*c[1];b.push(null);1==this._map[l][m]?a!=g-1&&(b[g]=[l,m]):(a=g)&&(b[g-1]=null)}for(e=b.length-1;0<=e;e--)b[e]||b.splice(e,1);return b.length?p.getItem(b):null};a._digLine=function(b){for(var a=1;a<b.length;a++){var f=b[a-
1],c=b[a];f=new ia(f[0],f[1],c[0],c[1]);f.create(this._digCallback);this._corridors.push(f)}};a._digCallback=function(b,a,f){this._map[b][a]=f;0==f&&this._dug++};a._isWallCallback=function(b,a){return 0>b||0>a||b>=this._width||a>=this._height?!1:1==this._map[b][a]};a._canBeDugCallback=function(b,a){return 1>b||1>a||b+1>=this._width||a+1>=this._height?!1:1==this._map[b][a]};return c}(Q);var M=function(d){function c(b,a,f){void 0===f&&(f={});b=d.call(this,b,a)||this;b._options={born:[5,6,7,8],survive:[4,
5,6,7,8],topology:8};b.setOptions(f);b._dirs=w[b._options.topology];b._map=b._fillMap(0);return b}q(c,d);var a=c.prototype;a.randomize=function(b){for(var a=0;a<this._width;a++)for(var f=0;f<this._height;f++)this._map[a][f]=p.getUniform()<b?1:0;return this};a.setOptions=function(b){Object.assign(this._options,b)};a.set=function(b,a,f){this._map[b][a]=f};a.create=function(b){for(var a=this._fillMap(0),f=this._options.born,c=this._options.survive,d=0;d<this._height;d++){var g=1,l=0;6==this._options.topology&&
(g=2,l=d%2);for(;l<this._width;l+=g){var m=this._map[l][d],t=this._getNeighbors(l,d);m&&-1!=c.indexOf(t)?a[l][d]=1:m||-1==f.indexOf(t)||(a[l][d]=1)}}this._map=a;b&&this._serviceCallback(b)};a._serviceCallback=function(b){for(var a=0;a<this._height;a++){var f=1,c=0;6==this._options.topology&&(f=2,c=a%2);for(;c<this._width;c+=f)b(c,a,this._map[c][a])}};a._getNeighbors=function(b,a){for(var e=0,c=0;c<this._dirs.length;c++){var d=this._dirs[c],g=b+d[0];d=a+d[1];0>g||g>=this._width||0>d||d>=this._height||
(e+=1==this._map[g][d]?1:0)}return e};a.connect=function(b,a,f){a||(a=0);var e=[],c={},d=1,l=[0,0];6==this._options.topology&&(d=2,l=[0,1]);for(var m=0;m<this._height;m++)for(var t=l[m%2];t<this._width;t+=d)if(this._freeSpace(t,m,a)){var n=[t,m];c[this._pointKey(n)]=n;e.push([t,m])}d=e[p.getUniformInt(0,e.length-1)];l=this._pointKey(d);e={};e[l]=d;delete c[l];for(this._findConnected(e,c,[d],!1,a);0<Object.keys(c).length;){l=this._getFromTo(e,c);d=l[0];m=l[1];l={};l[this._pointKey(d)]=d;this._findConnected(l,
c,[d],!0,a);(6==this._options.topology?this._tunnelToConnected6:this._tunnelToConnected).call(this,m,d,e,c,a,f);for(var q in l)d=l[q],this._map[d[0]][d[1]]=a,e[q]=d,delete c[q]}b&&this._serviceCallback(b)};a._getFromTo=function(b,a){for(var e=[0,0],c=[0,0],d,g=Object.keys(b),l=Object.keys(a),m=0;5>m&&!(g.length<l.length?(e=g,c=b[e[p.getUniformInt(0,e.length-1)]],e=this._getClosest(c,a)):(e=l,e=a[e[p.getUniformInt(0,e.length-1)]],c=this._getClosest(e,b)),d=(e[0]-c[0])*(e[0]-c[0])+(e[1]-c[1])*(e[1]-
c[1]),64>d);m++);return[e,c]};a._getClosest=function(b,a){var e=null,c=null,d;for(d in a){var g=a[d],l=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]);if(null==c||l<c)c=l,e=g}return e};a._findConnected=function(b,a,f,c,d){for(;0<f.length;){var e=f.splice(0,1)[0];e=6==this._options.topology?[[e[0]+2,e[1]],[e[0]+1,e[1]-1],[e[0]-1,e[1]-1],[e[0]-2,e[1]],[e[0]-1,e[1]+1],[e[0]+1,e[1]+1]]:[[e[0]+1,e[1]],[e[0]-1,e[1]],[e[0],e[1]+1],[e[0],e[1]-1]];for(var k=0;k<e.length;k++){var h=this._pointKey(e[k]);null==
b[h]&&this._freeSpace(e[k][0],e[k][1],d)&&(b[h]=e[k],c||delete a[h],f.push(e[k]))}}};a._tunnelToConnected=function(b,a,f,c,d,g){if(a[0]<b[0]){var e=a;var k=b}else e=b,k=a;for(var h=e[0];h<=k[0];h++){this._map[h][e[1]]=d;var p=[h,e[1]],n=this._pointKey(p);f[n]=p;delete c[n]}g&&e[0]<k[0]&&g(e,[k[0],e[1]]);h=k[0];a[1]<b[1]?(e=a,k=b):(e=b,k=a);for(b=e[1];b<k[1];b++)this._map[h][b]=d,a=[h,b],p=this._pointKey(a),f[p]=a,delete c[p];g&&e[1]<k[1]&&g([k[0],e[1]],[k[0],k[1]])};a._tunnelToConnected6=function(b,
a,c,d,h,g){if(a[0]<b[0]){var e=a;var f=b}else e=b,f=a;var k=e[0];for(e=e[1];k!=f[0]||e!=f[1];){var p=2;e<f[1]?(e++,p=1):e>f[1]&&(e--,p=1);k=k<f[0]?k+p:k>f[0]?k-p:f[1]%2?k-p:k+p;this._map[k][e]=h;p=[k,e];var n=this._pointKey(p);c[n]=p;delete d[n]}g&&g(a,b)};a._freeSpace=function(b,a,f){return 0<=b&&b<this._width&&0<=a&&a<this._height&&this._map[b][a]==f};a._pointKey=function(b){return b[0]+"."+b[1]};return c}(u),wa={room:ca,corridor:ia};Q=function(d){function c(b,a,f){void 0===f&&(f={});b=d.call(this,
b,a)||this;b._options=Object.assign({roomWidth:[3,9],roomHeight:[3,5],corridorLength:[3,10],dugPercentage:.2,timeLimit:1E3},f);b._features={room:4,corridor:4};b._map=[];b._featureAttempts=20;b._walls={};b._dug=0;b._digCallback=b._digCallback.bind(v(v(b)));b._canBeDugCallback=b._canBeDugCallback.bind(v(v(b)));b._isWallCallback=b._isWallCallback.bind(v(v(b)));b._priorityWallCallback=b._priorityWallCallback.bind(v(v(b)));return b}q(c,d);var a=c.prototype;a.create=function(b){this._rooms=[];this._corridors=
[];this._map=this._fillMap(1);this._walls={};this._dug=0;var a=(this._width-2)*(this._height-2);this._firstRoom();var f=Date.now();do{var c=0;if(Date.now()-f>this._options.timeLimit)break;var d=this._findWall();if(!d)break;var g=d.split(",");d=parseInt(g[0]);g=parseInt(g[1]);var l=this._getDiggingDirection(d,g);if(l){var m=0;do if(m++,this._tryFeature(d,g,l[0],l[1])){this._removeSurroundingWalls(d,g);this._removeSurroundingWalls(d-l[0],g-l[1]);break}while(m<this._featureAttempts);for(var p in this._walls)1<
this._walls[p]&&c++}}while(this._dug/a<this._options.dugPercentage||c);this._addDoors();if(b)for(a=0;a<this._width;a++)for(f=0;f<this._height;f++)b(a,f,this._map[a][f]);this._walls={};this._map=[];return this};a._digCallback=function(b,a,f){0==f||2==f?(this._map[b][a]=0,this._dug++):this._walls[b+","+a]=1};a._isWallCallback=function(b,a){return 0>b||0>a||b>=this._width||a>=this._height?!1:1==this._map[b][a]};a._canBeDugCallback=function(b,a){return 1>b||1>a||b+1>=this._width||a+1>=this._height?!1:
1==this._map[b][a]};a._priorityWallCallback=function(b,a){this._walls[b+","+a]=2};a._firstRoom=function(){var b=ca.createRandomCenter(Math.floor(this._width/2),Math.floor(this._height/2),this._options);this._rooms.push(b);b.create(this._digCallback)};a._findWall=function(){var b=[],a=[],f;for(f in this._walls)2==this._walls[f]?a.push(f):b.push(f);b=a.length?a:b;if(!b.length)return null;b=p.getItem(b.sort());delete this._walls[b];return b};a._tryFeature=function(b,a,f,c){var e=p.getWeightedValue(this._features);
b=wa[e].createRandomAt(b,a,f,c,this._options);if(!b.isValid(this._isWallCallback,this._canBeDugCallback))return!1;b.create(this._digCallback);b instanceof ca&&this._rooms.push(b);b instanceof ia&&(b.createPriorityWalls(this._priorityWallCallback),this._corridors.push(b));return!0};a._removeSurroundingWalls=function(b,a){for(var e=w[4],c=0;c<e.length;c++){var d=e[c],g=b+d[0],l=a+d[1];delete this._walls[g+","+l];g=b+2*d[0];l=a+2*d[1];delete this._walls[g+","+l]}};a._getDiggingDirection=function(b,a){if(0>=
b||0>=a||b>=this._width-1||a>=this._height-1)return null;for(var e=null,c=w[4],d=0;d<c.length;d++){var g=c[d];if(!this._map[b+g[0]][a+g[1]]){if(e)return null;e=g}}return e?[-e[0],-e[1]]:null};a._addDoors=function(){function b(b,e){return 1==a[b][e]}for(var a=this._map,c=0;c<this._rooms.length;c++){var d=this._rooms[c];d.clearDoors();d.addDoors(b)}};return c}(Q);var xa=function(d){function c(){return d.apply(this,arguments)||this}q(c,d);c.prototype.create=function(a){for(var b=this._fillMap(1),e=Math.ceil((this._width-
2)/2),c=[],d=[],h=0;h<e;h++)c.push(h),d.push(h);c.push(e-1);for(h=1;h+3<this._height;h+=2)for(var g=0;g<e;g++){var l=2*g+1,m=h;b[l][m]=0;g!=c[g+1]&&.375<p.getUniform()&&(ja(g,c,d),b[l+1][m]=0);g!=c[g]&&.375<p.getUniform()?ka(g,c,d):b[l][m+1]=0}for(g=0;g<e;g++)l=2*g+1,m=h,b[l][m]=0,g!=c[g+1]&&(g==c[g]||.375<p.getUniform())&&(ja(g,c,d),b[l+1][m]=0),ka(g,c,d);for(e=0;e<this._width;e++)for(c=0;c<this._height;c++)a(e,c,b[e][c]);return this};return c}(u),ya=function(d){function c(){var b=d.apply(this,arguments)||
this;b._stack=[];b._map=[];return b}q(c,d);var a=c.prototype;a.create=function(b){var a=this._width,c=this._height;this._map=[];for(var d=0;d<a;d++){this._map.push([]);for(var h=0;h<c;h++)this._map[d].push(0==d||0==h||d+1==a||h+1==c?1:0)}this._stack=[[1,1,a-2,c-2]];this._process();for(d=0;d<a;d++)for(h=0;h<c;h++)b(d,h,this._map[d][h]);this._map=[];return this};a._process=function(){for(;this._stack.length;){var b=this._stack.shift();this._partitionRoom(b)}};a._partitionRoom=function(b){for(var a=
[],c=[],d=b[0]+1;d<b[2];d++){var h=this._map[d][b[3]+1];!this._map[d][b[1]-1]||!h||d%2||a.push(d)}for(d=b[1]+1;d<b[3];d++)h=this._map[b[2]+1][d],!this._map[b[0]-1][d]||!h||d%2||c.push(d);if(a.length&&c.length){a=p.getItem(a);c=p.getItem(c);this._map[a][c]=1;d=[];h=[];d.push(h);for(var g=b[0];g<a;g++)this._map[g][c]=1,h.push([g,c]);h=[];d.push(h);for(g=a+1;g<=b[2];g++)this._map[g][c]=1,h.push([g,c]);h=[];d.push(h);for(g=b[1];g<c;g++)this._map[a][g]=1,h.push([a,g]);h=[];d.push(h);for(g=c+1;g<=b[3];g++)this._map[a][g]=
1,h.push([a,g]);h=p.getItem(d);for(g=0;g<d.length;g++){var l=d[g];l!=h&&(l=p.getItem(l),this._map[l[0]][l[1]]=0)}this._stack.push([b[0],b[1],a-1,c-1]);this._stack.push([a+1,b[1],b[2],c-1]);this._stack.push([b[0],c+1,a-1,b[3]]);this._stack.push([a+1,c+1,b[2],b[3]])}};return c}(u),za=function(d){function c(b,a,c){void 0===c&&(c=0);b=d.call(this,b,a)||this;b._regularity=c;b._map=[];return b}q(c,d);var a=c.prototype;a.create=function(b){var a=this._width,c=this._height,d=this._fillMap(1);a-=a%2?1:2;c-=
c%2?1:2;var h=0,g=[[0,0],[0,0],[0,0],[0,0]];do{var l=1+2*Math.floor(p.getUniform()*(a-1)/2);var m=1+2*Math.floor(p.getUniform()*(c-1)/2);h||(d[l][m]=0);if(!d[l][m]){this._randomize(g);do{0==Math.floor(p.getUniform()*(this._regularity+1))&&this._randomize(g);var t=!0;for(var n=0;4>n;n++){var q=l+2*g[n][0];var r=m+2*g[n][1];if(this._isFree(d,q,r,a,c)){d[q][r]=0;d[l+g[n][0]][m+g[n][1]]=0;l=q;m=r;t=!1;h++;break}}}while(!t)}}while(h+1<a*c/4);for(a=0;a<this._width;a++)for(c=0;c<this._height;c++)b(a,c,d[a][c]);
this._map=[];return this};a._randomize=function(b){for(var a=0;4>a;a++)b[a][0]=0,b[a][1]=0;switch(Math.floor(4*p.getUniform())){case 0:b[0][0]=-1;b[1][0]=1;b[2][1]=-1;b[3][1]=1;break;case 1:b[3][0]=-1;b[2][0]=1;b[1][1]=-1;b[0][1]=1;break;case 2:b[2][0]=-1;b[3][0]=1;b[0][1]=-1;b[1][1]=1;break;case 3:b[1][0]=-1,b[0][0]=1,b[3][1]=-1,b[2][1]=1}};a._isFree=function(b,a,c,d,h){return 1>a||1>c||a>=d||c>=h?!1:b[a][c]};return c}(u);u=function(d){function c(b,a,c){b=d.call(this,b,a)||this;b.map=[];b.rooms=
[];b.connectedCells=[];c=Object.assign({cellWidth:3,cellHeight:3},c);c.hasOwnProperty("roomWidth")||(c.roomWidth=b._calculateRoomSize(b._width,c.cellWidth));c.hasOwnProperty("roomHeight")||(c.roomHeight=b._calculateRoomSize(b._height,c.cellHeight));b._options=c;return b}q(c,d);var a=c.prototype;a.create=function(b){this.map=this._fillMap(1);this.rooms=[];this.connectedCells=[];this._initRooms();this._connectRooms();this._connectUnconnectedRooms();this._createRandomRoomConnections();this._createRooms();
this._createCorridors();if(b)for(var a=0;a<this._width;a++)for(var c=0;c<this._height;c++)b(a,c,this.map[a][c]);return this};a._calculateRoomSize=function(b,a){var c=Math.floor(b/a*.8);b=Math.floor(b/a*.25);2>b&&(b=2);2>c&&(c=2);return[b,c]};a._initRooms=function(){for(var b=0;b<this._options.cellWidth;b++){this.rooms.push([]);for(var a=0;a<this._options.cellHeight;a++)this.rooms[b].push({x:0,y:0,width:0,height:0,connections:[],cellx:b,celly:a})}};a._connectRooms=function(){var b=p.getUniformInt(0,
this._options.cellWidth-1),a=p.getUniformInt(0,this._options.cellHeight-1);do{var c=[0,2,4,6];c=p.shuffle(c);do{var d=!1;var h=c.pop();var g=b+w[8][h][0];h=a+w[8][h][1];if(!(0>g||g>=this._options.cellWidth||0>h||h>=this._options.cellHeight)){var l=this.rooms[b][a];if(0<l.connections.length&&l.connections[0][0]==g&&l.connections[0][1]==h)break;l=this.rooms[g][h];0==l.connections.length&&(l.connections.push([b,a]),this.connectedCells.push([g,h]),b=g,a=h,d=!0)}}while(0<c.length&&0==d)}while(0<c.length)};
a._connectUnconnectedRooms=function(){var b=this._options.cellWidth,a=this._options.cellHeight;this.connectedCells=p.shuffle(this.connectedCells);for(var c,d,h,g=0;g<this._options.cellWidth;g++)for(var l=0;l<this._options.cellHeight;l++)if(c=this.rooms[g][l],0==c.connections.length){var m=[0,2,4,6];m=p.shuffle(m);h=!1;do{var n=m.pop(),q=g+w[8][n][0];n=l+w[8][n][1];if(!(0>q||q>=b||0>n||n>=a)){d=this.rooms[q][n];h=!0;if(0==d.connections.length)break;for(q=0;q<d.connections.length;q++)if(d.connections[q][0]==
g&&d.connections[q][1]==l){h=!1;break}if(h)break}}while(m.length);h?c.connections.push([d.cellx,d.celly]):console.log("-- Unable to connect room.")}};a._createRandomRoomConnections=function(){};a._createRooms=function(){for(var b=this._width,a=this._height,c=this._options.cellWidth,d=this._options.cellHeight,h=Math.floor(this._width/c),g=Math.floor(this._height/d),l,m,n=this._options.roomWidth,q=this._options.roomHeight,r,u,B,v=0;v<c;v++)for(var w=0;w<d;w++){r=h*v;u=g*w;0==r&&(r=1);0==u&&(u=1);l=
p.getUniformInt(n[0],n[1]);m=p.getUniformInt(q[0],q[1]);if(0<w)for(B=this.rooms[v][w-1];3>u-(B.y+B.height);)u++;if(0<v)for(B=this.rooms[v-1][w];3>r-(B.x+B.width);)r++;B=Math.round(p.getUniformInt(0,h-l)/2);for(var x=Math.round(p.getUniformInt(0,g-m)/2);r+B+l>=b;)B?B--:l--;for(;u+x+m>=a;)x?x--:m--;r+=B;u+=x;this.rooms[v][w].x=r;this.rooms[v][w].y=u;this.rooms[v][w].width=l;this.rooms[v][w].height=m;for(B=r;B<r+l;B++)for(x=u;x<u+m;x++)this.map[B][x]=0}};a._getWallPosition=function(b,a){if(1==a||3==
a){var c=p.getUniformInt(b.x+1,b.x+b.width-2);if(1==a){var e=b.y-2;b=e+1}else e=b.y+b.height+1,b=e-1;this.map[c][b]=0}else e=p.getUniformInt(b.y+1,b.y+b.height-2),2==a?(c=b.x+b.width+1,b=c-1):(c=b.x-2,b=c+1),this.map[b][e]=0;return[c,e]};a._drawCorridor=function(b,a){var c=a[0]-b[0],e=a[1]-b[1];a=b[0];b=b[1];var d=[];var g=Math.abs(c);var l=Math.abs(e);var m=p.getUniform();var n=1-m;c=0<c?2:6;e=0<e?4:0;g<l?(m=Math.ceil(l*m),d.push([e,m]),d.push([c,g]),m=Math.floor(l*n),d.push([e,m])):(m=Math.ceil(g*
m),d.push([c,m]),d.push([e,l]),m=Math.floor(g*n),d.push([c,m]));for(this.map[a][b]=0;0<d.length;)for(g=d.pop();0<g[1];)a+=w[8][g[0]][0],b+=w[8][g[0]][1],this.map[a][b]=0,--g[1]};a._createCorridors=function(){for(var a=this._options.cellWidth,c=this._options.cellHeight,d,k,h,g,l=0;l<a;l++)for(var m=0;m<c;m++){d=this.rooms[l][m];for(var n=0;n<d.connections.length;n++)k=d.connections[n],k=this.rooms[k[0]][k[1]],k.cellx>d.cellx?(h=2,g=4):k.cellx<d.cellx?(h=4,g=2):k.celly>d.celly?(h=3,g=1):(h=1,g=3),this._drawCorridor(this._getWallPosition(d,
h),this._getWallPosition(k,g))}};return c}(u);x={Arena:x,Uniform:L,Cellular:M,Digger:Q,EllerMaze:xa,DividedMaze:ya,IceyMaze:za,Rogue:u};var Aa=.5*(Math.sqrt(3)-1),W=(3-Math.sqrt(3))/6;u={Simplex:function(d){function c(a){void 0===a&&(a=256);var b=d.call(this)||this;b._gradients=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];for(var c=[],f=0;f<a;f++)c.push(f);c=p.shuffle(c);b._perms=[];b._indexes=[];for(f=0;f<2*a;f++)b._perms.push(c[f%a]),b._indexes.push(b._perms[f]%b._gradients.length);return b}
q(c,d);c.prototype.get=function(a,b){var c=this._perms,d=this._indexes,k=c.length/2,h=0,g=0,l=0,m=(a+b)*Aa,n=Math.floor(a+m);var p=Math.floor(b+m);var q=(n+p)*W;m=a-(n-q);var u=b-(p-q);if(m>u){var v=1;var w=0}else v=0,w=1;q=m-v+W;var x=u-w+W;b=m-1+2*W;a=u-1+2*W;n=r(n,k);k=r(p,k);var z=.5-m*m-u*u;0<=z&&(z*=z,p=d[n+c[k]],h=this._gradients[p],h=z*z*(h[0]*m+h[1]*u));m=.5-q*q-x*x;0<=m&&(m*=m,p=d[n+v+c[k+w]],g=this._gradients[p],g=m*m*(g[0]*q+g[1]*x));m=.5-b*b-a*a;0<=m&&(m*=m,p=d[n+1+c[k+1]],c=this._gradients[p],
l=m*m*(c[0]*b+c[1]*a));return 70*(h+g+l)};return c}(function(){})};M=function(){function d(c,a,b,d){void 0===d&&(d={});this._toX=c;this._toY=a;this._passableCallback=b;this._options=Object.assign({topology:8},d);this._dirs=w[this._options.topology];8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}d.prototype._getNeighbors=function(c,a){for(var b=[],d=0;d<this._dirs.length;d++){var f=this._dirs[d],
k=c+f[0];f=a+f[1];this._passableCallback(k,f)&&b.push([k,f])}return b};return d}();L=function(d){function c(a,c,f,k){f=d.call(this,a,c,f,k)||this;f._computed={};f._todo=[];f._add(a,c,null);return f}q(c,d);var a=c.prototype;a.compute=function(a,c,d){var b=a+","+c;b in this._computed||this._compute(a,c);if(b in this._computed)for(a=this._computed[b];a;)d(a.x,a.y),a=a.prev};a._compute=function(a,c){for(;this._todo.length;){var b=this._todo.shift();if(b.x==a&&b.y==c)break;for(var d=this._getNeighbors(b.x,
b.y),e=0;e<d.length;e++){var g=d[e],l=g[0];g=g[1];l+","+g in this._computed||this._add(l,g,b)}}};a._add=function(a,c,d){d={x:a,y:c,prev:d};this._computed[a+","+c]=d;this._todo.push(d)};return c}(M);M=function(d){function c(a,c,f,k){void 0===k&&(k={});a=d.call(this,a,c,f,k)||this;a._todo=[];a._done={};return a}q(c,d);var a=c.prototype;a.compute=function(a,c,d){this._todo=[];this._done={};this._fromX=a;this._fromY=c;for(this._add(this._toX,this._toY,null);this._todo.length;){var b=this._todo.shift(),
e=b.x+","+b.y;if(!(e in this._done)){this._done[e]=b;if(b.x==a&&b.y==c)break;e=this._getNeighbors(b.x,b.y);for(var f=0;f<e.length;f++){var l=e[f],m=l[0];l=l[1];m+","+l in this._done||this._add(m,l,b)}}}if(a=this._done[a+","+c])for(;a;)d(a.x,a.y),a=a.prev};a._add=function(a,c,d){var b=this._distance(a,c);a={x:a,y:c,prev:d,g:d?d.g+1:0,h:b};c=a.g+a.h;for(d=0;d<this._todo.length;d++){var e=this._todo[d],f=e.g+e.h;if(c<f||c==f&&b<e.h){this._todo.splice(d,0,a);return}}this._todo.push(a)};a._distance=function(a,
c){switch(this._options.topology){case 4:return Math.abs(a-this._fromX)+Math.abs(c-this._fromY);case 6:return c=Math.abs(c-this._fromY),c+Math.max(0,(Math.abs(a-this._fromX)-c)/2);case 8:return Math.max(Math.abs(a-this._fromX),Math.abs(c-this._fromY))}};return c}(M);L={Dijkstra:L,AStar:M};M=function(){function d(a){this._scheduler=a;this._lock=1}var c=d.prototype;c.start=function(){return this.unlock()};c.lock=function(){this._lock++;return this};c.unlock=function(){if(!this._lock)throw Error("Cannot unlock unlocked engine");
for(this._lock--;!this._lock;){var a=this._scheduler.next();if(!a)return this.lock();(a=a.act())&&a.then&&(this.lock(),a.then(this.unlock.bind(this)))}return this};return d}();Q=function(){function d(a,b){void 0===b&&(b={});this._reflectivityCallback=a;this._options={};b=Object.assign({passes:1,emissionThreshold:100,range:10},b);this._lights={};this._reflectivityCache={};this._fovCache={};this.setOptions(b)}var c=d.prototype;c.setOptions=function(a){Object.assign(this._options,a);a&&a.range&&this.reset();
return this};c.setFOV=function(a){this._fov=a;this._fovCache={};return this};c.setLight=function(a,b,c){a=a+","+b;c?this._lights[a]="string"==typeof c?z(c):c:delete this._lights[a];return this};c.clearLights=function(){this._lights={}};c.reset=function(){this._reflectivityCache={};this._fovCache={};return this};c.compute=function(a){var b={},c={},d={},k;for(k in this._lights){var h=this._lights[k];c[k]=[0,0,0];E(c[k],h)}for(k=0;k<this._options.passes;k++)this._emitLight(c,d,b),k+1!=this._options.passes&&
(c=this._computeEmitters(d,b));for(var g in d)c=g.split(","),b=parseInt(c[0]),c=parseInt(c[1]),a(b,c,d[g]);return this};c._emitLight=function(a,b,c){for(var d in a){var e=d.split(","),h=parseInt(e[0]);e=parseInt(e[1]);this._emitLightFromCell(h,e,a[d],b);c[d]=1}return this};c._computeEmitters=function(a,b){var c={},d;for(d in a)if(!(d in b)){var k=a[d];if(d in this._reflectivityCache)var h=this._reflectivityCache[d];else{var g=d.split(",");h=parseInt(g[0]);g=parseInt(g[1]);h=this._reflectivityCallback(h,
g);this._reflectivityCache[d]=h}if(0!=h){g=[0,0,0];for(var l=0,m=0;3>m;m++){var n=Math.round(k[m]*h);g[m]=n;l+=n}l>this._options.emissionThreshold&&(c[d]=g)}}return c};c._emitLightFromCell=function(a,b,c,d){var e=a+","+b;a=e in this._fovCache?this._fovCache[e]:this._updateFOV(a,b);for(var f in a){b=a[f];f in d?e=d[f]:(e=[0,0,0],d[f]=e);for(var g=0;3>g;g++)e[g]+=Math.round(c[g]*b)}return this};c._updateFOV=function(a,b){var c={};this._fovCache[a+","+b]=c;var d=this._options.range;this._fov.compute(a,
b,d,function(a,b,e,f){e=f*(1-e/d);0!=e&&(c[a+","+b]=e)}.bind(this));return c};return d}();n.Util=qa;n.Color=V;n.Text=U;n.RNG=p;n.Display=P;n.StringGenerator=ba;n.EventQueue=la;n.Scheduler=N;n.FOV=J;n.Map=x;n.Noise=u;n.Path=L;n.Engine=M;n.Lighting=Q;n.DEFAULT_WIDTH=80;n.DEFAULT_HEIGHT=25;n.DIRS=w;n.KEYS={VK_CANCEL:3,VK_HELP:6,VK_BACK_SPACE:8,VK_TAB:9,VK_CLEAR:12,VK_RETURN:13,VK_ENTER:14,VK_SHIFT:16,VK_CONTROL:17,VK_ALT:18,VK_PAUSE:19,VK_CAPS_LOCK:20,VK_ESCAPE:27,VK_SPACE:32,VK_PAGE_UP:33,VK_PAGE_DOWN:34,
VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_PRINTSCREEN:44,VK_INSERT:45,VK_DELETE:46,VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_COLON:58,VK_SEMICOLON:59,VK_LESS_THAN:60,VK_EQUALS:61,VK_GREATER_THAN:62,VK_QUESTION_MARK:63,VK_AT:64,VK_A:65,VK_B:66,VK_C:67,VK_D:68,VK_E:69,VK_F:70,VK_G:71,VK_H:72,VK_I:73,VK_J:74,VK_K:75,VK_L:76,VK_M:77,VK_N:78,VK_O:79,VK_P:80,VK_Q:81,VK_R:82,VK_S:83,VK_T:84,VK_U:85,VK_V:86,VK_W:87,VK_X:88,VK_Y:89,VK_Z:90,
VK_CONTEXT_MENU:93,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_MULTIPLY:106,VK_ADD:107,VK_SEPARATOR:108,VK_SUBTRACT:109,VK_DECIMAL:110,VK_DIVIDE:111,VK_F1:112,VK_F2:113,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:124,VK_F14:125,VK_F15:126,VK_F16:127,VK_F17:128,VK_F18:129,VK_F19:130,VK_F20:131,VK_F21:132,VK_F22:133,VK_F23:134,VK_F24:135,
VK_NUM_LOCK:144,VK_SCROLL_LOCK:145,VK_CIRCUMFLEX:160,VK_EXCLAMATION:161,VK_DOUBLE_QUOTE:162,VK_HASH:163,VK_DOLLAR:164,VK_PERCENT:165,VK_AMPERSAND:166,VK_UNDERSCORE:167,VK_OPEN_PAREN:168,VK_CLOSE_PAREN:169,VK_ASTERISK:170,VK_PLUS:171,VK_PIPE:172,VK_HYPHEN_MINUS:173,VK_OPEN_CURLY_BRACKET:174,VK_CLOSE_CURLY_BRACKET:175,VK_TILDE:176,VK_COMMA:188,VK_PERIOD:190,VK_SLASH:191,VK_BACK_QUOTE:192,VK_OPEN_BRACKET:219,VK_BACK_SLASH:220,VK_CLOSE_BRACKET:221,VK_QUOTE:222,VK_META:224,VK_ALTGR:225,VK_WIN:91,VK_KANA:21,
VK_HANGUL:21,VK_EISU:22,VK_JUNJA:23,VK_FINAL:24,VK_HANJA:25,VK_KANJI:25,VK_CONVERT:28,VK_NONCONVERT:29,VK_ACCEPT:30,VK_MODECHANGE:31,VK_SELECT:41,VK_PRINT:42,VK_EXECUTE:43,VK_SLEEP:95};Object.defineProperty(n,"__esModule",{value:!0})})};
var f,ba=this||self;
function r(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function Ba(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};function Da(a,b){null!=a&&this.append.apply(this,arguments)}f=Da.prototype;f.La="";f.set=function(a){this.La=""+a};f.append=function(a,b,c){this.La+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.La+=arguments[d];return this};f.clear=function(){this.La=""};f.toString=function(){return this.La};var Ea={},Fa={},w,u={},Ja=null;function y(a){return null!=a&&!1!==a}function Oa(a){return a instanceof Array}function F(a,b){return a[r(null==b?null:b)]?!0:a._?!0:!1}function Pa(a,b){var c=null==b?null:b.constructor;c=y(y(c)?c.vb:c)?c.jb:r(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function Qa(a){var b=a.jb;return y(b)?b:G.a(a)}var Ra="undefined"!==typeof Symbol&&"function"===r(Symbol)?Symbol.iterator:"@@iterator";
function Sa(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Ta(){}var Ua=function Ua(a){if(null!=a&&null!=a.U)return a.U(a);var c=Ua[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Ua._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("ICounted.-count",a);};function aa(){}
var ea=function ea(a){if(null!=a&&null!=a.G)return a.G(a);var c=ea[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=ea._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IEmptyableCollection.-empty",a);},Va=function Va(a,b){if(null!=a&&null!=a.Z)return a.Z(a,b);var d=Va[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Va._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw Pa("ICollection.-conj",a);};function Wa(){}
var Xa=function Xa(a){switch(arguments.length){case 2:return Xa.b(arguments[0],arguments[1]);case 3:return Xa.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};Xa.b=function(a,b){if(null!=a&&null!=a.V)return a.V(a,b);var c=Xa[r(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=Xa._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw Pa("IIndexed.-nth",a);};
Xa.i=function(a,b,c){if(null!=a&&null!=a.$)return a.$(a,b,c);var d=Xa[r(null==a?null:a)];if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);d=Xa._;if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);throw Pa("IIndexed.-nth",a);};Xa.P=3;
var N=function N(a){if(null!=a&&null!=a.da)return a.da(a);var c=N[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=N._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("ISeq.-first",a);},Ya=function Ya(a){if(null!=a&&null!=a.ha)return a.ha(a);var c=Ya[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Ya._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("ISeq.-rest",a);};function Za(){}
var ab=function ab(a){if(null!=a&&null!=a.X)return a.X(a);var c=ab[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=ab._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("INext.-next",a);};function bb(){}var cb=function cb(a){switch(arguments.length){case 2:return cb.b(arguments[0],arguments[1]);case 3:return cb.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};
cb.b=function(a,b){if(null!=a&&null!=a.W)return a.W(a,b);var c=cb[r(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=cb._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw Pa("ILookup.-lookup",a);};cb.i=function(a,b,c){if(null!=a&&null!=a.C)return a.C(a,b,c);var d=cb[r(null==a?null:a)];if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);d=cb._;if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);throw Pa("ILookup.-lookup",a);};cb.P=3;
var db=function db(a,b,c){if(null!=a&&null!=a.Ma)return a.Ma(a,b,c);var e=db[r(null==a?null:a)];if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);e=db._;if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);throw Pa("IAssociative.-assoc",a);};function eb(){}
var fb=function fb(a){if(null!=a&&null!=a.Bb)return a.key;var c=fb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=fb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IMapEntry.-key",a);},gb=function gb(a){if(null!=a&&null!=a.Cb)return a.K;var c=gb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=gb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IMapEntry.-val",a);};function hb(){}
var ib=function ib(a){if(null!=a&&null!=a.fb)return a.fb(a);var c=ib[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=ib._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IDeref.-deref",a);};function jb(){}
var kb=function kb(a){if(null!=a&&null!=a.M)return a.M(a);var c=kb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=kb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IMeta.-meta",a);},lb=function lb(a,b){if(null!=a&&null!=a.S)return a.S(a,b);var d=lb[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=lb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw Pa("IWithMeta.-with-meta",a);};function mb(){}
var nb=function nb(a){switch(arguments.length){case 2:return nb.b(arguments[0],arguments[1]);case 3:return nb.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};nb.b=function(a,b){if(null!=a&&null!=a.ba)return a.ba(a,b);var c=nb[r(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=nb._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw Pa("IReduce.-reduce",a);};
nb.i=function(a,b,c){if(null!=a&&null!=a.ca)return a.ca(a,b,c);var d=nb[r(null==a?null:a)];if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);d=nb._;if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);throw Pa("IReduce.-reduce",a);};nb.P=3;function ob(){}
var pb=function pb(a,b,c){if(null!=a&&null!=a.hb)return a.hb(a,b,c);var e=pb[r(null==a?null:a)];if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);e=pb._;if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);throw Pa("IKVReduce.-kv-reduce",a);},qb=function qb(a,b){if(null!=a&&null!=a.I)return a.I(a,b);var d=qb[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=qb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw Pa("IEquiv.-equiv",a);},rb=function rb(a){if(null!=a&&null!=a.R)return a.R(a);
var c=rb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=rb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IHash.-hash",a);};function sb(){}var tb=function tb(a){if(null!=a&&null!=a.O)return a.O(a);var c=tb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=tb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("ISeqable.-seq",a);};function ub(){}function vb(){}function wb(){}
var xb=function xb(a,b){if(null!=a&&null!=a.ub)return a.ub(a,b);var d=xb[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=xb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw Pa("IWriter.-write",a);};function yb(){}
var zb=function zb(a,b,c){if(null!=a&&null!=a.N)return a.N(a,b,c);var e=zb[r(null==a?null:a)];if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);e=zb._;if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);throw Pa("IPrintWithWriter.-pr-writer",a);},Ab=function Ab(a){if(null!=a&&null!=a.Va)return a.Va(a);var c=Ab[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Ab._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IEditableCollection.-as-transient",a);},Cb=function Cb(a,b){if(null!=
a&&null!=a.Ya)return a.Ya(a,b);var d=Cb[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Cb._;if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);throw Pa("ITransientCollection.-conj!",a);},Db=function Db(a){if(null!=a&&null!=a.ib)return a.ib(a);var c=Db[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Db._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("ITransientCollection.-persistent!",a);},Eb=function Eb(a,b,c){if(null!=a&&null!=a.Ta)return a.Ta(a,b,c);var e=
Eb[r(null==a?null:a)];if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);e=Eb._;if(null!=e)return e.i?e.i(a,b,c):e.call(null,a,b,c);throw Pa("ITransientAssociative.-assoc!",a);},Fb=function Fb(a){if(null!=a&&null!=a.mb)return a.mb(a);var c=Fb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Fb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IChunk.-drop-first",a);},Gb=function Gb(a){if(null!=a&&null!=a.eb)return a.eb(a);var c=Gb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):
c.call(null,a);c=Gb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IChunkedSeq.-chunked-first",a);},Hb=function Hb(a){if(null!=a&&null!=a.Sa)return a.Sa(a);var c=Hb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Hb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IChunkedSeq.-chunked-rest",a);},Kb=function Kb(a,b){if(null!=a&&null!=a.Gb)return a.Gb(a,b);var d=Kb[r(null==a?null:a)];if(null!=d)return d.b?d.b(a,b):d.call(null,a,b);d=Kb._;if(null!=d)return d.b?d.b(a,
b):d.call(null,a,b);throw Pa("IReset.-reset!",a);},U=function U(a){switch(arguments.length){case 2:return U.b(arguments[0],arguments[1]);case 3:return U.i(arguments[0],arguments[1],arguments[2]);case 4:return U.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return U.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};
U.b=function(a,b){if(null!=a&&null!=a.rb)return a.rb(a,b);var c=U[r(null==a?null:a)];if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);c=U._;if(null!=c)return c.b?c.b(a,b):c.call(null,a,b);throw Pa("ISwap.-swap!",a);};U.i=function(a,b,c){if(null!=a&&null!=a.sb)return a.sb(a,b,c);var d=U[r(null==a?null:a)];if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);d=U._;if(null!=d)return d.i?d.i(a,b,c):d.call(null,a,b,c);throw Pa("ISwap.-swap!",a);};
U.F=function(a,b,c,d){if(null!=a&&null!=a.zb)return a.zb(a,b,c,d);var e=U[r(null==a?null:a)];if(null!=e)return e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);e=U._;if(null!=e)return e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);throw Pa("ISwap.-swap!",a);};U.ja=function(a,b,c,d,e){if(null!=a&&null!=a.Jb)return a.Jb(a,b,c,d,e);var g=U[r(null==a?null:a)];if(null!=g)return g.ja?g.ja(a,b,c,d,e):g.call(null,a,b,c,d,e);g=U._;if(null!=g)return g.ja?g.ja(a,b,c,d,e):g.call(null,a,b,c,d,e);throw Pa("ISwap.-swap!",a);};
U.P=5;function Lb(){}var Mb=function Mb(a){if(null!=a&&null!=a.ma)return a.ma(a);var c=Mb[r(null==a?null:a)];if(null!=c)return c.a?c.a(a):c.call(null,a);c=Mb._;if(null!=c)return c.a?c.a(a):c.call(null,a);throw Pa("IIterable.-iterator",a);};function Nb(a){this.Kb=a;this.j=1073741824;this.u=0}Nb.prototype.ub=function(a,b){return this.Kb.append(b)};function Ob(a){var b=new Da;a.N(null,new Nb(b),new Pb(null,5,[Qb,!0,Rb,!0,Sb,!1,Tb,!1,Ub,null],null));return G.a(b)}
var Vb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Wb(a){a=Vb(a|0,-862048943);return Vb(a<<15|a>>>-15,461845907)}function Xb(a,b){a=(a|0)^(b|0);return Vb(a<<13|a>>>-13,5)+-430675100|0}function Yb(a,b){a=(a|0)^b;a=Vb(a^a>>>16,-2048144789);a=Vb(a^a>>>13,-1028477387);return a^a>>>16}
function Zb(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Xb(c,Wb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return Yb(1===(a.length&1)?b^Wb(a.charCodeAt(a.length-1)):b,Vb(2,a.length))}var $b={},ac=0;function bc(a){255<ac&&($b={},ac=0);if(null==a)return 0;var b=$b[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Vb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;$b[a]=b;ac+=1;a=b}return a}
function cc(a){if(null!=a&&(a.j&4194304||u===a.Pb))return a.R(null)^0;if("number"===typeof a){if(y(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=bc(a),a=0===a?a:Yb(Xb(0,Wb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:rb(a)^0,a}function dc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function ec(a,b,c,d,e){this.Qa=a;this.name=b;this.Ka=c;this.Ra=d;this.sa=e;this.j=2154168321;this.u=4096}f=ec.prototype;f.toString=function(){return this.Ka};f.I=function(a,b){return b instanceof ec?this.Ka===b.Ka:!1};f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};
f.a=function(a){return O.b?O.b(a,this):O.call(null,a,this)};f.b=function(a,b){return O.i?O.i(a,this,b):O.call(null,a,this,b)};f.M=function(){return this.sa};f.S=function(a,b){return new ec(this.Qa,this.name,this.Ka,this.Ra,b)};f.R=function(){var a=this.Ra;return null!=a?a:this.Ra=a=dc(Zb(this.name),bc(this.Qa))};f.N=function(a,b){return xb(b,this.Ka)};
var ha=function ha(a){switch(arguments.length){case 1:return ha.a(arguments[0]);case 2:return ha.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};ha.a=function(a){for(;;){if(a instanceof ec)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?ha.b(null,a):ha.b(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof ld)a=a.Ja;else throw Error("no conversion to symbol");}};
ha.b=function(a,b){var c=null!=a?[G.a(a),"/",G.a(b)].join(""):b;return new ec(a,b,c,null,null)};ha.P=2;function fc(a){return null!=a?a.u&131072||u===a.Qb?!0:a.u?!1:F(Lb,a):F(Lb,a)}function P(a){if(null==a)return null;if(null!=a&&(a.j&8388608||u===a.Hb))return a.O(null);if(Oa(a)||"string"===typeof a)return 0===a.length?null:new gc(a,0,null);if(F(sb,a))return tb(a);throw Error([G.a(a)," is not ISeqable"].join(""));}
function R(a){if(null==a)return null;if(null!=a&&(a.j&64||u===a.Xa))return a.da(null);a=P(a);return null==a?null:N(a)}function hc(a){return null!=a?null!=a&&(a.j&64||u===a.Xa)?a.ha(null):(a=P(a))?a.ha(null):ic:ic}function T(a){return null==a?null:null!=a&&(a.j&128||u===a.Wa)?a.X(null):P(hc(a))}
var jc=function jc(a){switch(arguments.length){case 1:return jc.a(arguments[0]);case 2:return jc.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return jc.v(arguments[0],arguments[1],new gc(c.slice(2),0,null))}};jc.a=function(){return!0};jc.b=function(a,b){return null==a?null==b:a===b||qb(a,b)};jc.v=function(a,b,c){for(;;)if(jc.b(a,b))if(T(c))a=b,b=R(c),c=T(c);else return jc.b(b,R(c));else return!1};
jc.J=function(a){var b=R(a),c=T(a);a=R(c);c=T(c);return this.v(b,a,c)};jc.P=2;function kc(a){this.B=a}kc.prototype.next=function(){if(null!=this.B){var a=R(this.B);this.B=T(this.B);return{value:a,done:!1}}return{value:null,done:!0}};function lc(a){return new kc(P(a))}function mc(a){var b=0,c=1;for(a=P(a);;)if(null!=a)b+=1,c=Vb(31,c)+cc(R(a))|0,a=T(a);else return Yb(Xb(0,Wb(c)),b)}var nc=Yb(Xb(0,Wb(1)),0);
function oc(a){var b=0,c=0;for(a=P(a);;)if(null!=a)b+=1,c=c+cc(R(a))|0,a=T(a);else return Yb(Xb(0,Wb(c)),b)}var pc=Yb(Xb(0,Wb(0)),0);Ta["null"]=!0;Ua["null"]=function(){return 0};Date.prototype.I=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};qb.number=function(a,b){return a===b};jb["function"]=!0;kb["function"]=function(){return null};rb._=function(a){return a[ca]||(a[ca]=++da)};function qc(){this.K=!1;this.j=32768;this.u=0}qc.prototype.fb=function(){return this.K};
function rc(a){return a instanceof qc}function sc(a){return ib(a)}function tc(a,b){var c=a.U(null);if(0===c)return b.A?b.A():b.call(null);for(var d=a.V(null,0),e=1;;)if(e<c){var g=a.V(null,e);d=b.b?b.b(d,g):b.call(null,d,g);if(rc(d))return ib(d);e+=1}else return d}function uc(a,b){var c=a.length;if(0===a.length)return b.A?b.A():b.call(null);for(var d=a[0],e=1;;)if(e<c){var g=a[e];d=b.b?b.b(d,g):b.call(null,d,g);if(rc(d))return ib(d);e+=1}else return d}
function vc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var g=a[c];e=b.b?b.b(e,g):b.call(null,e,g);if(rc(e))return ib(e);c+=1}else return e}function wc(a,b,c,d){for(var e=a.length;;)if(d<e){var g=a[d];c=b.b?b.b(c,g):b.call(null,c,g);if(rc(c))return ib(c);d+=1}else return c}function xc(a){return null!=a?a.j&2||u===a.yb?!0:a.j?!1:F(Ta,a):F(Ta,a)}function yc(a){return null!=a?a.j&16||u===a.qb?!0:a.j?!1:F(Wa,a):F(Wa,a)}
function V(a,b,c){var d=W.a?W.a(a):W.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(jc.b(zc?zc(a,c):Ac.call(null,a,c),b))return c;c+=1}else return-1}function X(a,b,c){var d=W.a?W.a(a):W.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(jc.b(zc?zc(a,c):Ac.call(null,a,c),b))return c;--c}else return-1}function Bc(a,b){this.c=a;this.m=b}Bc.prototype.ga=function(){return this.m<this.c.length};
Bc.prototype.next=function(){var a=this.c[this.m];this.m+=1;return a};function gc(a,b,c){this.c=a;this.m=b;this.o=c;this.j=166592766;this.u=139264}f=gc.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W.a?W.a(this):W.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.V=function(a,b){a=b+this.m;if(0<=a&&a<this.c.length)return this.c[a];throw Error("Index out of bounds");};f.$=function(a,b,c){a=b+this.m;return 0<=a&&a<this.c.length?this.c[a]:c};
f.ma=function(){return new Bc(this.c,this.m)};f.M=function(){return this.o};f.X=function(){return this.m+1<this.c.length?new gc(this.c,this.m+1,null):null};f.U=function(){var a=this.c.length-this.m;return 0>a?0:a};f.R=function(){return mc(this)};f.I=function(a,b){return Cc.b?Cc.b(this,b):Cc.call(null,this,b)};f.G=function(){return ic};f.ba=function(a,b){return wc(this.c,b,this.c[this.m],this.m+1)};f.ca=function(a,b,c){return wc(this.c,b,c,this.m)};f.da=function(){return this.c[this.m]};
f.ha=function(){return this.m+1<this.c.length?new gc(this.c,this.m+1,null):ic};f.O=function(){return this.m<this.c.length?this:null};f.S=function(a,b){return b===this.o?this:new gc(this.c,this.m,b)};f.Z=function(a,b){return Z.b?Z.b(b,this):Z.call(null,b,this)};gc.prototype[Ra]=function(){return lc(this)};function Dc(a){return 0<a.length?new gc(a,0,null):null}qb._=function(a,b){return a===b};
var Ec=function Ec(a){switch(arguments.length){case 0:return Ec.A();case 1:return Ec.a(arguments[0]);case 2:return Ec.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ec.v(arguments[0],arguments[1],new gc(c.slice(2),0,null))}};Ec.A=function(){return Fc};Ec.a=function(a){return a};Ec.b=function(a,b){return null!=a?Va(a,b):new Gc(null,b,null,1,null)};
Ec.v=function(a,b,c){for(;;)if(y(c))a=Ec.b(a,b),b=R(c),c=T(c);else return Ec.b(a,b)};Ec.J=function(a){var b=R(a),c=T(a);a=R(c);c=T(c);return this.v(b,a,c)};Ec.P=2;function W(a){if(null!=a)if(null!=a&&(a.j&2||u===a.yb))a=a.U(null);else if(Oa(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.j&8388608||u===a.Hb))a:{a=P(a);for(var b=0;;){if(xc(a)){a=b+Ua(a);break a}a=T(a);b+=1}}else a=Ua(a);else a=0;return a}
function Hc(a,b,c){for(;;){if(null==a)return c;if(0===b)return P(a)?R(a):c;if(yc(a))return Xa(a,b,c);if(P(a))a=T(a),--b;else return c}}function Ac(a){switch(arguments.length){case 2:return zc(arguments[0],arguments[1]);case 3:return Ic(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}
function zc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.j&16||u===a.qb))return a.V(null,b);if(Oa(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.j&64||u===a.Xa)||null!=a&&(a.j&16777216||u===a.tb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(P(a)){a=R(a);break a}throw Error("Index out of bounds");}if(yc(a)){a=Xa(a,b);break a}if(P(a))a=T(a),--b;else throw Error("Index out of bounds");}return a}if(F(Wa,a))return Xa(a,b);throw Error(["nth not supported on this type ",G.a(Qa(null==a?null:a.constructor))].join(""));}
function Ic(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.j&16||u===a.qb))return a.$(null,b,c);if(Oa(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.j&64||u===a.Xa)||null!=a&&(a.j&16777216||u===a.tb))return 0>b?c:Hc(a,b,c);if(F(Wa,a))return Xa(a,b,c);throw Error(["nth not supported on this type ",G.a(Qa(null==a?null:a.constructor))].join(""));}
var O=function O(a){switch(arguments.length){case 2:return O.b(arguments[0],arguments[1]);case 3:return O.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};O.b=function(a,b){return null==a?null:null!=a&&(a.j&256||u===a.Ab)?a.W(null,b):Oa(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&b<a.length?a.charAt(b|0):null:F(bb,a)?cb(a,b):null};
O.i=function(a,b,c){return null!=a?null!=a&&(a.j&256||u===a.Ab)?a.C(null,b,c):Oa(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:F(bb,a)?cb(a,b,c):c:c};O.P=3;var Jc=function Jc(a){switch(arguments.length){case 3:return Jc.i(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Jc.v(arguments[0],arguments[1],arguments[2],new gc(c.slice(3),0,null))}};
Jc.i=function(a,b,c){if(null!=a&&(a.j&512||u===a.Zb))a=a.Ma(null,b,c);else if(null!=a)a=db(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],g=Kc(b,d);-1===g?(g=b,g.push(d),g.push(e)):b[g+1]=e;c+=2}else break;a=new Pb(null,b.length/2,b,null)}return a};Jc.v=function(a,b,c,d){for(;;)if(a=Jc.i(a,b,c),y(d))b=R(d),c=R(T(d)),d=T(T(d));else return a};Jc.J=function(a){var b=R(a),c=T(a);a=R(c);var d=T(c);c=R(d);d=T(d);return this.v(b,a,c,d)};Jc.P=3;
function Lc(a,b){this.f=a;this.o=b;this.j=393217;this.u=0}f=Lc.prototype;f.M=function(){return this.o};f.S=function(a,b){return new Lc(this.f,b)};
f.call=function(a){switch(arguments.length-1){case 0:return this.A();case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);case 3:return this.i(arguments[1],arguments[2],arguments[3]);case 4:return this.F(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.la(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ea(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.za(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ba(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Da(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:var b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],g=arguments[5],h=arguments[6],k=arguments[7],l=arguments[8],m=arguments[9],p=arguments[10],q=arguments[11],t=arguments[12],v=arguments[13],C=arguments[14],E=arguments[15],
K=arguments[16],S=arguments[17],Y=arguments[18],fa=arguments[19],ra=arguments[20],Na=arguments[21];return Mc.gb?Mc.gb(this.f,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra,Na):Mc.call(null,this.f,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra,Na);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.A=function(){return this.f.A?this.f.A():this.f.call(null)};
f.a=function(a){return this.f.a?this.f.a(a):this.f.call(null,a)};f.b=function(a,b){return this.f.b?this.f.b(a,b):this.f.call(null,a,b)};f.i=function(a,b,c){return this.f.i?this.f.i(a,b,c):this.f.call(null,a,b,c)};f.F=function(a,b,c,d){return this.f.F?this.f.F(a,b,c,d):this.f.call(null,a,b,c,d)};f.ja=function(a,b,c,d,e){return this.f.ja?this.f.ja(a,b,c,d,e):this.f.call(null,a,b,c,d,e)};f.la=function(a,b,c,d,e,g){return this.f.la?this.f.la(a,b,c,d,e,g):this.f.call(null,a,b,c,d,e,g)};
f.Ea=function(a,b,c,d,e,g,h){return this.f.Ea?this.f.Ea(a,b,c,d,e,g,h):this.f.call(null,a,b,c,d,e,g,h)};f.Fa=function(a,b,c,d,e,g,h,k){return this.f.Fa?this.f.Fa(a,b,c,d,e,g,h,k):this.f.call(null,a,b,c,d,e,g,h,k)};f.Ga=function(a,b,c,d,e,g,h,k,l){return this.f.Ga?this.f.Ga(a,b,c,d,e,g,h,k,l):this.f.call(null,a,b,c,d,e,g,h,k,l)};f.ta=function(a,b,c,d,e,g,h,k,l,m){return this.f.ta?this.f.ta(a,b,c,d,e,g,h,k,l,m):this.f.call(null,a,b,c,d,e,g,h,k,l,m)};
f.ua=function(a,b,c,d,e,g,h,k,l,m,p){return this.f.ua?this.f.ua(a,b,c,d,e,g,h,k,l,m,p):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p)};f.va=function(a,b,c,d,e,g,h,k,l,m,p,q){return this.f.va?this.f.va(a,b,c,d,e,g,h,k,l,m,p,q):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q)};f.wa=function(a,b,c,d,e,g,h,k,l,m,p,q,t){return this.f.wa?this.f.wa(a,b,c,d,e,g,h,k,l,m,p,q,t):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t)};
f.xa=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v){return this.f.xa?this.f.xa(a,b,c,d,e,g,h,k,l,m,p,q,t,v):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v)};f.ya=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C){return this.f.ya?this.f.ya(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C)};f.za=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E){return this.f.za?this.f.za(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E)};
f.Aa=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K){return this.f.Aa?this.f.Aa(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K)};f.Ba=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S){return this.f.Ba?this.f.Ba(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S)};
f.Ca=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y){return this.f.Ca?this.f.Ca(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y)};f.Da=function(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa){return this.f.Da?this.f.Da(a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa):this.f.call(null,a,b,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa)};function Nc(a,b){return"function"==r(a)?new Lc(a,b):null==a?null:lb(a,b)}
function Oc(a){return null!=a&&(null!=a?a.j&131072||u===a.Db||(a.j?0:F(jb,a)):F(jb,a))?kb(a):null}function Pc(a){return null!=a?a.j&16777216||u===a.tb?!0:a.j?!1:F(ub,a):F(ub,a)}function Qc(a){return null==a?!1:null!=a?a.j&1024||u===a.Tb?!0:a.j?!1:F(eb,a):F(eb,a)}function Rc(a){return null!=a?a.j&67108864||u===a.Vb?!0:a.j?!1:F(wb,a):F(wb,a)}function Sc(a){return null!=a?a.j&16384||u===a.Wb?!0:a.j?!1:F(hb,a):F(hb,a)}function Tc(a){return null!=a?a.u&512||u===a.Nb?!0:!1:!1}
function Uc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Vc={};function Wc(a){return null==a?!1:!1===a?!1:!0}function Xc(a,b){var c=P(b);return c?(b=R(c),c=T(c),Yc?Yc(a,b,c):Zc.call(null,a,b,c)):a.A?a.A():a.call(null)}function $c(a,b,c){for(c=P(c);;)if(c){var d=R(c);b=a.b?a.b(b,d):a.call(null,b,d);if(rc(b))return ib(b);c=T(c)}else return b}
function ad(a,b){a=Mb(a);if(y(a.ga()))for(var c=a.next();;)if(a.ga()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(rc(c))return ib(c)}else return c;else return b.A?b.A():b.call(null)}function bd(a,b,c){for(a=Mb(a);;)if(a.ga()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(rc(c))return ib(c)}else return c}
function Zc(a){switch(arguments.length){case 2:return xd(arguments[0],arguments[1]);case 3:return Yc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}function xd(a,b){return null!=b&&(b.j&524288||u===b.Fb)?b.ba(null,a):Oa(b)?uc(b,a):"string"===typeof b?uc(b,a):F(mb,b)?nb(b,a):fc(b)?ad(b,a):Xc(a,b)}
function Yc(a,b,c){return null!=c&&(c.j&524288||u===c.Fb)?c.ca(null,a,b):Oa(c)?vc(c,a,b):"string"===typeof c?vc(c,a,b):F(mb,c)?nb(c,a,b):fc(c)?bd(c,a,b):$c(a,b,c)}function cd(a,b){return null!=b?pb(b,a,!0):!0}function dd(a){return a}
var ed=function ed(a){switch(arguments.length){case 0:return ed.A();case 1:return ed.a(arguments[0]);case 2:return ed.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ed.v(arguments[0],arguments[1],new gc(c.slice(2),0,null))}};ed.A=function(){return 0};ed.a=function(a){return a};ed.b=function(a,b){return a+b};ed.v=function(a,b,c){return Yc(ed,a+b,c)};ed.J=function(a){var b=R(a),c=T(a);a=R(c);c=T(c);return this.v(b,a,c)};
ed.P=2;function fd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function gd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var G=function G(a){switch(arguments.length){case 0:return G.A();case 1:return G.a(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return G.v(arguments[0],new gc(c.slice(1),0,null))}};G.A=function(){return""};G.a=function(a){return null==a?"":[a].join("")};
G.v=function(a,b){for(a=new Da(G.a(a));;)if(y(b))a=a.append(G.a(R(b))),b=T(b);else return a.toString()};G.J=function(a){var b=R(a);a=T(a);return this.v(b,a)};G.P=1;function Cc(a,b){if(Pc(b))if(xc(a)&&xc(b)&&W(a)!==W(b))a=!1;else a:for(a=P(a),b=P(b);;){if(null==a){a=null==b;break a}if(null!=b&&jc.b(R(a),R(b)))a=T(a),b=T(b);else{a=!1;break a}}else a=null;return Wc(a)}function Gc(a,b,c,d,e){this.o=a;this.first=b;this.Ha=c;this.count=d;this.s=e;this.j=65937646;this.u=8192}f=Gc.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){return 1===this.count?null:this.Ha};f.U=function(){return this.count};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};
f.G=function(){return lb(ic,this.o)};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return this.first};f.ha=function(){return 1===this.count?ic:this.Ha};f.O=function(){return this};f.S=function(a,b){return b===this.o?this:new Gc(b,this.first,this.Ha,this.count,this.s)};f.Z=function(a,b){return new Gc(this.o,b,this,this.count+1,null)};Gc.prototype[Ra]=function(){return lc(this)};function id(a){this.o=a;this.j=65937614;this.u=8192}f=id.prototype;
f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){return null};f.U=function(){return 0};f.R=function(){return nc};f.I=function(a,b){return(null!=b?b.j&33554432||u===b.Sb||(b.j?0:F(vb,b)):F(vb,b))||Pc(b)?null==P(b):!1};f.G=function(){return this};
f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return null};f.ha=function(){return ic};f.O=function(){return null};f.S=function(a,b){return b===this.o?this:new id(b)};f.Z=function(a,b){return new Gc(this.o,b,null,1,null)};var ic=new id(null);id.prototype[Ra]=function(){return lc(this)};var jd=function jd(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return jd.v(0<c.length?new gc(c.slice(0),0,null):null)};
jd.v=function(a){if(a instanceof gc&&0===a.m)var b=a.c;else a:for(b=[];;)if(null!=a)b.push(N(a)),a=ab(a);else break a;a=b.length;for(var c=ic;;)if(0<a){var d=a-1;c=Va(c,b[a-1]);a=d}else return c};jd.P=0;jd.J=function(a){return this.v(P(a))};function kd(a,b,c,d){this.o=a;this.first=b;this.Ha=c;this.s=d;this.j=65929452;this.u=8192}f=kd.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){return null==this.Ha?null:P(this.Ha)};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};
f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return this.first};f.ha=function(){return null==this.Ha?ic:this.Ha};f.O=function(){return this};f.S=function(a,b){return b===this.o?this:new kd(b,this.first,this.Ha,this.s)};f.Z=function(a,b){return new kd(null,b,this,null)};kd.prototype[Ra]=function(){return lc(this)};function Z(a,b){return null==b?new Gc(null,a,null,1,null):null!=b&&(b.j&64||u===b.Xa)?new kd(null,a,b,null):new kd(null,a,P(b),null)}
function ld(a,b,c,d){this.Qa=a;this.name=b;this.Ja=c;this.Ra=d;this.j=2153775105;this.u=4096}f=ld.prototype;f.toString=function(){return[":",G.a(this.Ja)].join("")};f.I=function(a,b){return b instanceof ld?this.Ja===b.Ja:!1};f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};
f.a=function(a){return O.b(a,this)};f.b=function(a,b){return O.i(a,this,b)};f.R=function(){var a=this.Ra;return null!=a?a:this.Ra=a=dc(Zb(this.name),bc(this.Qa))+2654435769|0};f.N=function(a,b){return xb(b,[":",G.a(this.Ja)].join(""))};function ia(a){if(null!=a&&(a.u&4096||u===a.Eb))return a.Qa;throw Error(["Doesn't support namespace: ",G.a(a)].join(""));}
var md=function md(a){switch(arguments.length){case 1:return md.a(arguments[0]);case 2:return md.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}};md.a=function(a){if(a instanceof ld)return a;if(a instanceof ec)return new ld(ia(a),nd.a?nd.a(a):nd.call(null,a),a.Ka,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new ld(b[0],b[1],a,null):new ld(null,b[0],a,null)}return null};
md.b=function(a,b){a=a instanceof ld?nd.a?nd.a(a):nd.call(null,a):a instanceof ec?nd.a?nd.a(a):nd.call(null,a):a;b=b instanceof ld?nd.a?nd.a(b):nd.call(null,b):b instanceof ec?nd.a?nd.a(b):nd.call(null,b):b;return new ld(a,b,[y(a)?[G.a(a),"/"].join(""):null,G.a(b)].join(""),null)};md.P=2;function od(a,b,c){this.o=a;this.Za=b;this.B=null;this.s=c;this.j=32374988;this.u=1}f=od.prototype;f.toString=function(){return Ob(this)};
function pd(a){null!=a.Za&&(a.B=a.Za.A?a.Za.A():a.Za.call(null),a.Za=null);return a.B}f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){this.O(null);return null==this.B?null:T(this.B)};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return lb(ic,this.o)};
f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){this.O(null);return null==this.B?null:R(this.B)};f.ha=function(){this.O(null);return null!=this.B?hc(this.B):ic};f.O=function(){pd(this);if(null==this.B)return null;for(var a=this.B;;)if(a instanceof od)a=pd(a);else return this.B=a,P(this.B)};f.S=function(a,b){var c=this;return b===this.o?c:new od(b,function(){return c.O(null)},this.s)};f.Z=function(a,b){return Z(b,this)};od.prototype[Ra]=function(){return lc(this)};
function qd(a){this.lb=a;this.end=0;this.j=2;this.u=0}qd.prototype.add=function(a){this.lb[this.end]=a;return this.end+=1};qd.prototype.Y=function(){var a=new rd(this.lb,0,this.end);this.lb=null;return a};qd.prototype.U=function(){return this.end};function ja(a){return new qd(Array(a))}function rd(a,b,c){this.c=a;this.off=b;this.end=c;this.j=524306;this.u=0}f=rd.prototype;f.U=function(){return this.end-this.off};f.V=function(a,b){return this.c[this.off+b]};
f.$=function(a,b,c){return 0<=b&&b<this.end-this.off?this.c[this.off+b]:c};f.mb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new rd(this.c,this.off+1,this.end)};f.ba=function(a,b){return wc(this.c,b,this.c[this.off],this.off+1)};f.ca=function(a,b,c){return wc(this.c,b,c,this.off)};function sd(a,b,c,d){this.Y=a;this.pa=b;this.o=c;this.s=d;this.j=31850732;this.u=1536}f=sd.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){return 1<Ua(this.Y)?new sd(Fb(this.Y),this.pa,null,null):null==this.pa?null:tb(this.pa)};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};
f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.da=function(){return Xa(this.Y,0)};f.ha=function(){return 1<Ua(this.Y)?new sd(Fb(this.Y),this.pa,null,null):null==this.pa?ic:this.pa};f.O=function(){return this};f.eb=function(){return this.Y};f.Sa=function(){return null==this.pa?ic:this.pa};f.S=function(a,b){return b===this.o?this:new sd(this.Y,this.pa,b,this.s)};f.Z=function(a,b){return Z(b,this)};f.nb=function(){return null==this.pa?null:this.pa};sd.prototype[Ra]=function(){return lc(this)};
function td(a,b){return 0===Ua(a)?b:new sd(a,b,null,null)}function ud(a,b){a.add(b)}function Vd(a){var b=[];for(a=P(a);;)if(null!=a)b.push(R(a)),a=T(a);else return b}function vd(a,b){if(xc(b))return W(b);var c=0;for(b=P(b);;)if(null!=b&&c<a)c+=1,b=T(b);else return c}
var wd=function wd(a){if(null==a)return null;var c=T(a);return null==c?P(R(a)):Z(R(a),wd.a?wd.a(c):wd.call(null,c))},Wd=function Wd(a){switch(arguments.length){case 0:return Wd.A();case 1:return Wd.a(arguments[0]);case 2:return Wd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Wd.v(arguments[0],arguments[1],new gc(c.slice(2),0,null))}};Wd.A=function(){return new od(null,function(){return null},null)};
Wd.a=function(a){return new od(null,function(){return a},null)};Wd.b=function(a,b){return new od(null,function(){var c=P(a);return c?Tc(c)?td(Gb(c),Wd.b(Hb(c),b)):Z(R(c),Wd.b(hc(c),b)):b},null)};Wd.v=function(a,b,c){return function h(e,g){return new od(null,function(){var k=P(e);return k?Tc(k)?td(Gb(k),h(Hb(k),g)):Z(R(k),h(hc(k),g)):y(g)?h(R(g),T(g)):null},null)}(Wd.b(a,b),c)};Wd.J=function(a){var b=R(a),c=T(a);a=R(c);c=T(c);return this.v(b,a,c)};Wd.P=2;
var yd=function yd(a){switch(arguments.length){case 0:return yd.A();case 1:return yd.a(arguments[0]);case 2:return yd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return yd.v(arguments[0],arguments[1],new gc(c.slice(2),0,null))}};yd.A=function(){return Ab(Fc)};yd.a=function(a){return a};yd.b=function(a,b){return Cb(a,b)};yd.v=function(a,b,c){for(;;)if(a=Cb(a,b),y(c))b=R(c),c=T(c);else return a};
yd.J=function(a){var b=R(a),c=T(a);a=R(c);c=T(c);return this.v(b,a,c)};yd.P=2;
function zd(a,b,c){var d=P(c);if(0===b)return a.A?a.A():a.call(null);c=N(d);var e=Ya(d);if(1===b)return a.a?a.a(c):a.call(null,c);d=N(e);var g=Ya(e);if(2===b)return a.b?a.b(c,d):a.call(null,c,d);e=N(g);var h=Ya(g);if(3===b)return a.i?a.i(c,d,e):a.call(null,c,d,e);g=N(h);var k=Ya(h);if(4===b)return a.F?a.F(c,d,e,g):a.call(null,c,d,e,g);h=N(k);var l=Ya(k);if(5===b)return a.ja?a.ja(c,d,e,g,h):a.call(null,c,d,e,g,h);k=N(l);var m=Ya(l);if(6===b)return a.la?a.la(c,d,e,g,h,k):a.call(null,c,d,e,g,h,k);l=
N(m);var p=Ya(m);if(7===b)return a.Ea?a.Ea(c,d,e,g,h,k,l):a.call(null,c,d,e,g,h,k,l);m=N(p);var q=Ya(p);if(8===b)return a.Fa?a.Fa(c,d,e,g,h,k,l,m):a.call(null,c,d,e,g,h,k,l,m);p=N(q);var t=Ya(q);if(9===b)return a.Ga?a.Ga(c,d,e,g,h,k,l,m,p):a.call(null,c,d,e,g,h,k,l,m,p);q=N(t);var v=Ya(t);if(10===b)return a.ta?a.ta(c,d,e,g,h,k,l,m,p,q):a.call(null,c,d,e,g,h,k,l,m,p,q);t=N(v);var C=Ya(v);if(11===b)return a.ua?a.ua(c,d,e,g,h,k,l,m,p,q,t):a.call(null,c,d,e,g,h,k,l,m,p,q,t);v=N(C);var E=Ya(C);if(12===
b)return a.va?a.va(c,d,e,g,h,k,l,m,p,q,t,v):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v);C=N(E);var K=Ya(E);if(13===b)return a.wa?a.wa(c,d,e,g,h,k,l,m,p,q,t,v,C):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C);E=N(K);var S=Ya(K);if(14===b)return a.xa?a.xa(c,d,e,g,h,k,l,m,p,q,t,v,C,E):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E);K=N(S);var Y=Ya(S);if(15===b)return a.ya?a.ya(c,d,e,g,h,k,l,m,p,q,t,v,C,E,K):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K);S=N(Y);var fa=Ya(Y);if(16===b)return a.za?a.za(c,d,e,g,h,k,l,m,p,q,t,v,C,
E,K,S):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S);Y=N(fa);var ra=Ya(fa);if(17===b)return a.Aa?a.Aa(c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y);fa=N(ra);var Na=Ya(ra);if(18===b)return a.Ba?a.Ba(c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa);ra=N(Na);Na=Ya(Na);if(19===b)return a.Ca?a.Ca(c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra);var ma=N(Na);Ya(Na);if(20===b)return a.Da?
a.Da(c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra,ma):a.call(null,c,d,e,g,h,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra,ma);throw Error("Only up to 20 arguments supported on functions");}function Ad(a){return null!=a&&(a.j&128||u===a.Wa)?a.X(null):P(hc(a))}function Bd(a,b,c){return null==c?a.a?a.a(b):a.call(a,b):Cd(a,b,N(c),Ad(c))}function Cd(a,b,c,d){return null==d?a.b?a.b(b,c):a.call(a,b,c):Dd(a,b,c,N(d),Ad(d))}function Dd(a,b,c,d,e){return null==e?a.i?a.i(b,c,d):a.call(a,b,c,d):Ed(a,b,c,d,N(e),Ad(e))}
function Ed(a,b,c,d,e,g){if(null==g)return a.F?a.F(b,c,d,e):a.call(a,b,c,d,e);var h=N(g),k=T(g);if(null==k)return a.ja?a.ja(b,c,d,e,h):a.call(a,b,c,d,e,h);g=N(k);var l=T(k);if(null==l)return a.la?a.la(b,c,d,e,h,g):a.call(a,b,c,d,e,h,g);k=N(l);var m=T(l);if(null==m)return a.Ea?a.Ea(b,c,d,e,h,g,k):a.call(a,b,c,d,e,h,g,k);l=N(m);var p=T(m);if(null==p)return a.Fa?a.Fa(b,c,d,e,h,g,k,l):a.call(a,b,c,d,e,h,g,k,l);m=N(p);var q=T(p);if(null==q)return a.Ga?a.Ga(b,c,d,e,h,g,k,l,m):a.call(a,b,c,d,e,h,g,k,l,m);
p=N(q);var t=T(q);if(null==t)return a.ta?a.ta(b,c,d,e,h,g,k,l,m,p):a.call(a,b,c,d,e,h,g,k,l,m,p);q=N(t);var v=T(t);if(null==v)return a.ua?a.ua(b,c,d,e,h,g,k,l,m,p,q):a.call(a,b,c,d,e,h,g,k,l,m,p,q);t=N(v);var C=T(v);if(null==C)return a.va?a.va(b,c,d,e,h,g,k,l,m,p,q,t):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t);v=N(C);var E=T(C);if(null==E)return a.wa?a.wa(b,c,d,e,h,g,k,l,m,p,q,t,v):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v);C=N(E);var K=T(E);if(null==K)return a.xa?a.xa(b,c,d,e,h,g,k,l,m,p,q,t,v,C):a.call(a,b,c,d,
e,h,g,k,l,m,p,q,t,v,C);E=N(K);var S=T(K);if(null==S)return a.ya?a.ya(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v,C,E);K=N(S);var Y=T(S);if(null==Y)return a.za?a.za(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K);S=N(Y);var fa=T(Y);if(null==fa)return a.Aa?a.Aa(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S);Y=N(fa);var ra=T(fa);if(null==ra)return a.Ba?a.Ba(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y):a.call(a,b,c,d,e,h,g,k,l,m,
p,q,t,v,C,E,K,S,Y);fa=N(ra);var Na=T(ra);if(null==Na)return a.Ca?a.Ca(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y,fa):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y,fa);ra=N(Na);Na=T(Na);if(null==Na)return a.Da?a.Da(b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra):a.call(a,b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra);b=[b,c,d,e,h,g,k,l,m,p,q,t,v,C,E,K,S,Y,fa,ra];for(c=Na;;)if(c)b.push(N(c)),c=T(c);else break;return a.apply(a,b)}
function Mc(a){switch(arguments.length){case 2:return Fd(arguments[0],arguments[1]);case 3:return Gd(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.J?(c=Z(c,Z(d,e)),d=b.P,e=2+vd(d-1,e),b=e<=d?zd(b,e,c):b.J(c)):b=Cd(b,c,d,P(e));return b;case 5:return ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;return Hd(arguments[0],arguments[1],
arguments[2],arguments[3],arguments[4],new gc(b.slice(5),0,null))}}function Fd(a,b){if(a.J){var c=a.P,d=vd(c+1,b);return d<=c?zd(a,d,b):a.J(b)}b=P(b);return null==b?a.A?a.A():a.call(a):Bd(a,N(b),Ad(b))}function Gd(a,b,c){if(a.J){b=Z(b,c);var d=a.P;c=vd(d,c)+1;return c<=d?zd(a,c,b):a.J(b)}return Bd(a,b,P(c))}function ka(a,b,c,d,e){return a.J?(b=Z(b,Z(c,Z(d,e))),c=a.P,e=3+vd(c-2,e),e<=c?zd(a,e,b):a.J(b)):Dd(a,b,c,d,P(e))}
function Hd(a,b,c,d,e,g){return a.J?(g=wd(g),b=Z(b,Z(c,Z(d,Z(e,g)))),c=a.P,g=4+vd(c-3,g),g<=c?zd(a,g,b):a.J(b)):Ed(a,b,c,d,e,wd(g))}
function Id(){if("undefined"===typeof Ea||"undefined"===typeof Fa||"undefined"===typeof w)w=function(a){this.Yb=a;this.j=393216;this.u=0},w.prototype.S=function(a,b){return new w(b)},w.prototype.M=function(){return this.Yb},w.prototype.ga=function(){return!1},w.prototype.next=function(){return Error("No such element")},w.prototype.remove=function(){return Error("Unsupported operation")},w.Xb=function(){return new Jd(null,1,5,Kd,[la],null)},w.vb=!0,w.jb="cljs.core/t_cljs$core33893",w.Ib=function(a){return xb(a,
"cljs.core/t_cljs$core33893")};return new w(Md)}function Nd(a,b){for(;;){if(null==P(b))return!0;var c=R(b);c=a.a?a.a(c):a.call(null,c);if(y(c))b=T(b);else return!1}}function Xd(a,b){for(;;)if(b=P(b)){var c=R(b);c=a.a?a.a(c):a.call(null,c);if(y(c))return c;b=T(b)}else return null}
function na(a,b){return function(){function c(l,m,p){return a.F?a.F(b,l,m,p):a.call(null,b,l,m,p)}function d(l,m){return a.i?a.i(b,l,m):a.call(null,b,l,m)}function e(l){return a.b?a.b(b,l):a.call(null,b,l)}function g(){return a.a?a.a(b):a.call(null,b)}var h=null,k=function(){function l(p,q,t,v){var C=null;if(3<arguments.length){C=0;for(var E=Array(arguments.length-3);C<E.length;)E[C]=arguments[C+3],++C;C=new gc(E,0,null)}return m.call(this,p,q,t,C)}function m(p,q,t,v){return Hd(a,b,p,q,t,Dc([v]))}
l.P=3;l.J=function(p){var q=R(p);p=T(p);var t=R(p);p=T(p);var v=R(p);p=hc(p);return m(q,t,v,p)};l.v=m;return l}();h=function(l,m,p,q){switch(arguments.length){case 0:return g.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,p);default:var t=null;if(3<arguments.length){t=0;for(var v=Array(arguments.length-3);t<v.length;)v[t]=arguments[t+3],++t;t=new gc(v,0,null)}return k.v(l,m,p,t)}throw Error("Invalid arity: "+arguments.length);};h.P=3;h.J=k.J;h.A=
g;h.a=e;h.b=d;h.i=c;h.v=k.v;return h}()}function Od(a){return function e(c,d){return new od(null,function(){var g=P(d);if(g){if(Tc(g)){for(var h=Gb(g),k=W(h),l=ja(k),m=0;;)if(m<k)ud(l,function(){var p=c+m,q=Xa(h,m);return jd.b?jd.b(p,q):jd.call(null,p,q)}()),m+=1;else break;return td(l.Y(),e(c+k,Hb(g)))}return Z(function(){var p=R(g);return jd.b?jd.b(c,p):jd.call(null,c,p)}(),e(c+1,hc(g)))}return null},null)}(0,a)}
function Pd(a){this.state=a;this.xb=this.Mb=this.o=null;this.u=16386;this.j=6455296}Pd.prototype.I=function(a,b){return this===b};Pd.prototype.fb=function(){return this.state};Pd.prototype.M=function(){return this.o};Pd.prototype.R=function(){return this[ca]||(this[ca]=++da)};
function Qd(a,b){if(a instanceof Pd){var c=a.Mb;if(null!=c&&!y(c.a?c.a(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.xb)a:for(var d=P(a.xb),e=null,g=0,h=0;;)if(h<g){var k=e.V(null,h),l=Ic(k,0,null);k=Ic(k,1,null);k.F?k.F(l,a,c,b):k.call(null,l,a,c,b);h+=1}else if(d=P(d))Tc(d)?(e=Gb(d),d=Hb(d),l=e,g=W(e),e=l):(e=R(d),l=Ic(e,0,null),k=Ic(e,1,null),k.F?k.F(l,a,c,b):k.call(null,l,a,c,b),d=T(d),e=null,g=0),h=0;else break a;return b}return Kb(a,b)}
var oa=function oa(a){switch(arguments.length){case 2:return oa.b(arguments[0],arguments[1]);case 3:return oa.i(arguments[0],arguments[1],arguments[2]);case 4:return oa.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return oa.v(arguments[0],arguments[1],arguments[2],arguments[3],new gc(c.slice(4),0,null))}};
oa.b=function(a,b){if(a instanceof Pd){var c=a.state;b=b.a?b.a(c):b.call(null,c);a=Qd(a,b)}else a=U(a,b);return a};oa.i=function(a,b,c){if(a instanceof Pd){var d=a.state;b=b.b?b.b(d,c):b.call(null,d,c);a=Qd(a,b)}else a=U(a,b,c);return a};oa.F=function(a,b,c,d){if(a instanceof Pd){var e=a.state;b=b.i?b.i(e,c,d):b.call(null,e,c,d);a=Qd(a,b)}else a=U(a,b,c,d);return a};oa.v=function(a,b,c,d,e){return a instanceof Pd?Qd(a,ka(b,a.state,c,d,e)):U(a,b,c,d,e)};
oa.J=function(a){var b=R(a),c=T(a);a=R(c);var d=T(c);c=R(d);var e=T(d);d=R(e);e=T(e);return this.v(b,a,c,d,e)};oa.P=4;
var Rd=function Rd(a){switch(arguments.length){case 1:return Rd.a(arguments[0]);case 2:return Rd.b(arguments[0],arguments[1]);case 3:return Rd.i(arguments[0],arguments[1],arguments[2]);case 4:return Rd.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Rd.v(arguments[0],arguments[1],arguments[2],arguments[3],new gc(c.slice(4),0,null))}};
Rd.a=function(a){return function(b){return function(){function c(k,l){l=a.a?a.a(l):a.call(null,l);return b.b?b.b(k,l):b.call(null,k,l)}function d(k){return b.a?b.a(k):b.call(null,k)}function e(){return b.A?b.A():b.call(null)}var g=null,h=function(){function k(m,p,q){var t=null;if(2<arguments.length){t=0;for(var v=Array(arguments.length-2);t<v.length;)v[t]=arguments[t+2],++t;t=new gc(v,0,null)}return l.call(this,m,p,t)}function l(m,p,q){p=Gd(a,p,q);return b.b?b.b(m,p):b.call(null,m,p)}k.P=2;k.J=function(m){var p=
R(m);m=T(m);var q=R(m);m=hc(m);return l(p,q,m)};k.v=l;return k}();g=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var p=null;if(2<arguments.length){p=0;for(var q=Array(arguments.length-2);p<q.length;)q[p]=arguments[p+2],++p;p=new gc(q,0,null)}return h.v(k,l,p)}throw Error("Invalid arity: "+arguments.length);};g.P=2;g.J=h.J;g.A=e;g.a=d;g.b=c;g.v=h.v;return g}()}};
Rd.b=function(a,b){return new od(null,function(){var c=P(b);if(c){if(Tc(c)){for(var d=Gb(c),e=W(d),g=ja(e),h=0;;)if(h<e)ud(g,function(){var k=Xa(d,h);return a.a?a.a(k):a.call(null,k)}()),h+=1;else break;return td(g.Y(),Rd.b(a,Hb(c)))}return Z(function(){var k=R(c);return a.a?a.a(k):a.call(null,k)}(),Rd.b(a,hc(c)))}return null},null)};
Rd.i=function(a,b,c){return new od(null,function(){var d=P(b),e=P(c);if(d&&e){var g=R(d);var h=R(e);g=a.b?a.b(g,h):a.call(null,g,h);d=Z(g,Rd.i(a,hc(d),hc(e)))}else d=null;return d},null)};Rd.F=function(a,b,c,d){return new od(null,function(){var e=P(b),g=P(c),h=P(d);if(e&&g&&h){var k=R(e);var l=R(g),m=R(h);k=a.i?a.i(k,l,m):a.call(null,k,l,m);e=Z(k,Rd.F(a,hc(e),hc(g),hc(h)))}else e=null;return e},null)};
Rd.v=function(a,b,c,d,e){return Rd.b(function(g){return Fd(a,g)},function k(h){return new od(null,function(){var l=Rd.b(P,h);return Nd(dd,l)?Z(Rd.b(R,l),k(Rd.b(hc,l))):null},null)}(Ec.v(e,d,Dc([c,b]))))};Rd.J=function(a){var b=R(a),c=T(a);a=R(c);var d=T(c);c=R(d);var e=T(d);d=R(e);e=T(e);return this.v(b,a,c,d,e)};Rd.P=4;function Sd(a,b){return new od(null,function(){if(0<a){var c=P(b);return c?Z(R(c),Sd(a-1,hc(c))):null}return null},null)}
function Qf(a,b,c,d){this.o=a;this.count=b;this.K=c;this.next=d;this.s=null;this.j=32374988;this.u=1}f=Qf.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){return null==this.next?1<this.count?this.next=new Qf(null,this.count-1,this.K,null):-1===this.count?this:null:this.next};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};
f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){if(-1===this.count)for(var c=b.b?b.b(this.K,this.K):b.call(null,this.K,this.K);;){if(rc(c))return ib(c);c=b.b?b.b(c,this.K):b.call(null,c,this.K)}else for(a=1,c=this.K;;)if(a<this.count){c=b.b?b.b(c,this.K):b.call(null,c,this.K);if(rc(c))return ib(c);a+=1}else return c};
f.ca=function(a,b,c){if(-1===this.count)for(c=b.b?b.b(c,this.K):b.call(null,c,this.K);;){if(rc(c))return ib(c);c=b.b?b.b(c,this.K):b.call(null,c,this.K)}else for(a=0;;)if(a<this.count){c=b.b?b.b(c,this.K):b.call(null,c,this.K);if(rc(c))return ib(c);a+=1}else return c};f.da=function(){return this.K};f.ha=function(){return null==this.next?1<this.count?this.next=new Qf(null,this.count-1,this.K,null):-1===this.count?this:ic:this.next};f.O=function(){return this};
f.S=function(a,b){return b===this.o?this:new Qf(b,this.count,this.K,this.next)};f.Z=function(a,b){return Z(b,this)};function dg(a,b){return 0<a?new Qf(null,a,b,null):ic}function Td(a){return new od(null,function(){return Z(a.A?a.A():a.call(null),Td(a))},null)}function Ud(a,b){return Sd(a,Td(b))}function jg(a,b){return null!=a?null!=a&&(a.u&4||u===a.Ob)?lb(Db(Yc(Cb,Ab(a),b)),Oc(a)):Yc(Va,a,b):Yc(Ec,a,b)}
function pa(a,b){return Db(Yc(function(c,d){return yd.b(c,a.a?a.a(d):a.call(null,d))},Ab(Fc),b))}function kg(a,b){return jg(Fc,Rd.i(a,b,sf(0,Number.MAX_VALUE)))}function qa(a,b){return Yc(O,a,b)}
var sa=function sa(a,b,c){b=P(b);var e=R(b),g=T(b);return g?Jc.i(a,e,function(){var h=O.b(a,e);return sa.i?sa.i(h,g,c):sa.call(null,h,g,c)}()):Jc.i(a,e,c)},Yd=function Yd(a){switch(arguments.length){case 3:return Yd.i(arguments[0],arguments[1],arguments[2]);case 4:return Yd.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Yd.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Yd.la(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Yd.v(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],new gc(c.slice(6),0,null))}};Yd.i=function(a,b,c){b=P(b);var d=R(b);return(b=T(b))?Jc.i(a,d,Yd.i(O.b(a,d),b,c)):Jc.i(a,d,function(){var e=O.b(a,d);return c.a?c.a(e):c.call(null,e)}())};
Yd.F=function(a,b,c,d){b=P(b);var e=R(b);return(b=T(b))?Jc.i(a,e,Yd.F(O.b(a,e),b,c,d)):Jc.i(a,e,function(){var g=O.b(a,e);return c.b?c.b(g,d):c.call(null,g,d)}())};Yd.ja=function(a,b,c,d,e){b=P(b);var g=R(b);return(b=T(b))?Jc.i(a,g,Yd.ja(O.b(a,g),b,c,d,e)):Jc.i(a,g,function(){var h=O.b(a,g);return c.i?c.i(h,d,e):c.call(null,h,d,e)}())};
Yd.la=function(a,b,c,d,e,g){b=P(b);var h=R(b);return(b=T(b))?Jc.i(a,h,Yd.la(O.b(a,h),b,c,d,e,g)):Jc.i(a,h,function(){var k=O.b(a,h);return c.F?c.F(k,d,e,g):c.call(null,k,d,e,g)}())};Yd.v=function(a,b,c,d,e,g,h){var k=P(b);b=R(k);return(k=T(k))?Jc.i(a,b,Hd(Yd,O.b(a,b),k,c,d,Dc([e,g,h]))):Jc.i(a,b,Hd(c,O.b(a,b),d,e,g,Dc([h])))};Yd.J=function(a){var b=R(a),c=T(a);a=R(c);var d=T(c);c=R(d);var e=T(d);d=R(e);var g=T(e);e=R(g);var h=T(g);g=R(h);h=T(h);return this.v(b,a,c,d,e,g,h)};Yd.P=6;
function Zd(a,b){this.D=a;this.c=b}function $d(a){return new Zd(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function ae(a){a=a.l;return 32>a?0:a-1>>>5<<5}function be(a,b,c){for(;;){if(0===b)return c;var d=$d(a);d.c[0]=c;c=d;b-=5}}
var ce=function ce(a,b,c,d){var g=new Zd(c.D,Sa(c.c)),h=a.l-1>>>b&31;5===b?g.c[h]=d:(c=c.c[h],null!=c?(b-=5,a=ce.F?ce.F(a,b,c,d):ce.call(null,a,b,c,d)):a=be(null,b-5,d),g.c[h]=a);return g};function de(a,b){if(b>=ae(a))return a.fa;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.c[b>>>a&31];a=d}else return c.c}function ee(a,b){if(0<=b&&b<a.l)b=de(a,b);else throw a=a.l,Error(["No item ",G.a(b)," in vector of length ",G.a(a)].join(""));return b}
var fe=function fe(a,b,c,d,e){var h=new Zd(c.D,Sa(c.c));if(0===b)h.c[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.c[k];a=fe.ja?fe.ja(a,b,c,d,e):fe.call(null,a,b,c,d,e);h.c[k]=a}return h};function ge(a,b,c){this.kb=this.m=0;this.c=a;this.Lb=b;this.start=0;this.end=c}ge.prototype.ga=function(){return this.m<this.end};ge.prototype.next=function(){32===this.m-this.kb&&(this.c=de(this.Lb,this.m),this.kb+=32);var a=this.c[this.m&31];this.m+=1;return a};
function he(a,b,c,d){return c<d?ie(a,b,zc(a,c),c+1,d):b.A?b.A():b.call(null)}function ie(a,b,c,d,e){var g=c;c=d;for(d=de(a,d);;)if(c<e){var h=c&31;d=0===h?de(a,c):d;h=d[h];g=b.b?b.b(g,h):b.call(null,g,h);if(rc(g))return ib(g);c+=1}else return g}function Jd(a,b,c,d,e,g){this.o=a;this.l=b;this.shift=c;this.root=d;this.fa=e;this.s=g;this.j=167666463;this.u=139268}f=Jd.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.W=function(a,b){return this.C(null,b,null)};f.C=function(a,b,c){return"number"===typeof b?this.$(null,b,c):c};
f.hb=function(a,b,c){a=0;for(var d=c;;)if(a<this.l){var e=de(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=g+a,k=e[g];d=b.i?b.i(d,h,k):b.call(null,d,h,k);if(rc(d)){e=d;break a}g+=1}else{e=d;break a}if(rc(e))return ib(e);a+=c;d=e}else return d};f.V=function(a,b){return ee(this,b)[b&31]};f.$=function(a,b,c){return 0<=b&&b<this.l?de(this,b)[b&31]:c};
f.ob=function(a,b){if(0<=a&&a<this.l){if(ae(this)<=a){var c=Sa(this.fa);c[a&31]=b;return new Jd(this.o,this.l,this.shift,this.root,c,null)}return new Jd(this.o,this.l,this.shift,fe(this,this.shift,this.root,a,b),this.fa,null)}if(a===this.l)return this.Z(null,b);throw Error(["Index ",G.a(a)," out of bounds  [0,",G.a(this.l),"]"].join(""));};f.ma=function(){var a=this.l;return new ge(0<W(this)?de(this,0):null,this,a)};f.M=function(){return this.o};f.U=function(){return this.l};
f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){if(b instanceof Jd)if(this.l===W(b))for(a=this.ma(null),b=b.ma(null);;)if(a.ga()){var c=a.next(),d=b.next();if(!jc.b(c,d))return!1}else return!0;else return!1;else return Cc(this,b)};f.Va=function(){return new je(this.l,this.shift,ke.a?ke.a(this.root):ke.call(null,this.root),le.a?le.a(this.fa):le.call(null,this.fa))};f.G=function(){return lb(Fc,this.o)};f.ba=function(a,b){return he(this,b,0,this.l)};
f.ca=function(a,b,c){a=0;for(var d=c;;)if(a<this.l){var e=de(this,a);c=e.length;a:for(var g=0;;)if(g<c){var h=e[g];d=b.b?b.b(d,h):b.call(null,d,h);if(rc(d)){e=d;break a}g+=1}else{e=d;break a}if(rc(e))return ib(e);a+=c;d=e}else return d};f.Ma=function(a,b,c){if("number"===typeof b)return this.ob(b,c);throw Error("Vector's key for assoc must be a number.");};
f.O=function(){if(0===this.l)return null;if(32>=this.l)return new gc(this.fa,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.c[0];else{a=a.c;break a}}return me?me(this,a,0,0):ne.call(null,this,a,0,0)};f.S=function(a,b){return b===this.o?this:new Jd(b,this.l,this.shift,this.root,this.fa,this.s)};
f.Z=function(a,b){if(32>this.l-ae(this)){a=this.fa.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.fa[d],d+=1;else break;c[a]=b;return new Jd(this.o,this.l+1,this.shift,this.root,c,null)}a=(c=this.l>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=$d(null),c.c[0]=this.root,d=be(null,this.shift,new Zd(null,this.fa)),c.c[1]=d):c=ce(this,this.shift,this.root,new Zd(null,this.fa));return new Jd(this.o,this.l+1,a,c,[b],null)};
f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.a=function(a){return this.V(null,a)};f.b=function(a,b){return this.$(null,a,b)};
var Kd=new Zd(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Fc=new Jd(null,0,5,Kd,[],nc);function lg(a,b){var c=a.length;a=b?a:Sa(a);if(32>c)return new Jd(null,c,5,Kd,a,null);b=32;for(var d=(new Jd(null,32,5,Kd,a.slice(0,32),null)).Va(null);;)if(b<c){var e=b+1;d=yd.b(d,a[b]);b=e}else return Db(d)}Jd.prototype[Ra]=function(){return lc(this)};
function oe(a){return y(pe.a?pe.a(a):pe.call(null,a))?new Jd(null,2,5,Kd,[qe.a?qe.a(a):qe.call(null,a),re.a?re.a(a):re.call(null,a)],null):Sc(a)?Nc(a,null):Oa(a)?lg(a,!0):Db(Yc(Cb,Ab(Fc),a))}var ng=function ng(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ng.v(0<c.length?new gc(c.slice(0),0,null):null)};ng.v=function(a){return a instanceof gc&&0===a.m?lg(a.c,!Oa(a.c)):oe(a)};ng.P=0;ng.J=function(a){return this.v(P(a))};
function se(a,b,c,d,e){this.ka=a;this.node=b;this.m=c;this.off=d;this.o=e;this.s=null;this.j=32375020;this.u=1536}f=se.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.m,d=this.off+1;a=me?me(a,b,c,d):ne.call(null,a,b,c,d);return null==a?null:a}return this.nb()};
f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){return he(this.ka,b,this.m+this.off,W(this.ka))};f.ca=function(a,b,c){return ie(this.ka,b,c,this.m+this.off,W(this.ka))};f.da=function(){return this.node[this.off]};f.ha=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.m,d=this.off+1;a=me?me(a,b,c,d):ne.call(null,a,b,c,d);return null==a?ic:a}return this.Sa(null)};f.O=function(){return this};
f.eb=function(){var a=this.node;return new rd(a,this.off,a.length)};f.Sa=function(){var a=this.m+this.node.length;if(a<Ua(this.ka)){var b=this.ka,c=de(this.ka,a);return me?me(b,c,a,0):ne.call(null,b,c,a,0)}return ic};f.S=function(a,b){return b===this.o?this:te?te(this.ka,this.node,this.m,this.off,b):ne.call(null,this.ka,this.node,this.m,this.off,b)};f.Z=function(a,b){return Z(b,this)};
f.nb=function(){var a=this.m+this.node.length;if(a<Ua(this.ka)){var b=this.ka,c=de(this.ka,a);return me?me(b,c,a,0):ne.call(null,b,c,a,0)}return null};se.prototype[Ra]=function(){return lc(this)};
function ne(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new se(b,ee(b,c),c,d,null);case 4:return me(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return te(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}function me(a,b,c,d){return new se(a,b,c,d,null)}function te(a,b,c,d,e){return new se(a,b,c,d,e)}
function ue(a,b){return a===b.D?b:new Zd(a,Sa(b.c))}function ke(a){return new Zd({},Sa(a.c))}function le(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Uc(a,0,b,0,a.length);return b}var ve=function ve(a,b,c,d){c=ue(a.root.D,c);var g=a.l-1>>>b&31;if(5===b)a=d;else{var h=c.c[g];null!=h?(b-=5,a=ve.F?ve.F(a,b,h,d):ve.call(null,a,b,h,d)):a=be(a.root.D,b-5,d)}c.c[g]=a;return c};
function je(a,b,c,d){this.l=a;this.shift=b;this.root=c;this.fa=d;this.u=88;this.j=275}f=je.prototype;
f.Ya=function(a,b){if(this.root.D){if(32>this.l-ae(this))this.fa[this.l&31]=b;else{a=new Zd(this.root.D,this.fa);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.fa=c;this.l>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=be(this.root.D,this.shift,a),this.root=new Zd(this.root.D,b),this.shift=c):this.root=ve(this,this.shift,this.root,a)}this.l+=1;return this}throw Error("conj! after persistent!");};f.ib=function(){if(this.root.D){this.root.D=null;var a=this.l-ae(this),b=Array(a);Uc(this.fa,0,b,0,a);return new Jd(null,this.l,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
f.Ta=function(a,b,c){if("number"===typeof b)return we(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function we(a,b,c){if(a.root.D){if(0<=b&&b<a.l){if(ae(a)<=b)a.fa[b&31]=c;else{var d=function k(g,h){h=ue(a.root.D,h);if(0===g)h.c[b&31]=c;else{var l=b>>>g&31;g=k(g-5,h.c[l]);h.c[l]=g}return h}(a.shift,a.root);a.root=d}return a}if(b===a.l)return a.Ya(null,c);throw Error(["Index ",G.a(b)," out of bounds for TransientVector of length",G.a(a.l)].join(""));}throw Error("assoc! after persistent!");}f.U=function(){if(this.root.D)return this.l;throw Error("count after persistent!");};
f.V=function(a,b){if(this.root.D)return ee(this,b)[b&31];throw Error("nth after persistent!");};f.$=function(a,b,c){return 0<=b&&b<this.l?this.V(null,b):c};f.W=function(a,b){return this.C(null,b,null)};f.C=function(a,b,c){if(this.root.D)return"number"===typeof b?this.$(null,b,c):c;throw Error("lookup after persistent!");};
f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.a=function(a){return this.W(null,a)};f.b=function(a,b){return this.C(null,a,b)};function xe(){this.j=2097152;this.u=0}xe.prototype.I=function(){return!1};var ye=new xe;
function ze(a,b){return Wc(Qc(b)&&!Rc(b)?W(a)===W(b)?(null!=a?a.j&1048576||u===a.Rb||(a.j?0:F(ob,a)):F(ob,a))?cd(function(c,d,e){return jc.b(O.i(b,d,ye),e)?!0:new qc},a):Nd(function(c){return jc.b(O.i(b,R(c),ye),R(T(c)))},a):null:null)}function Ae(a){this.B=a}Ae.prototype.next=function(){if(null!=this.B){var a=R(this.B),b=Ic(a,0,null);a=Ic(a,1,null);this.B=T(this.B);return{value:[b,a],done:!1}}return{value:null,done:!0}};
function Kc(a,b){if(b instanceof ld)a:{var c=a.length;b=b.Ja;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof ld&&b===a[d].Ja){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof ec)a:for(c=a.length,b=b.Ka,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof ec&&b===a[d].Ka){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(jc.b(b,a[d])){a=d;break a}d+=2}return a}function Be(a,b){this.key=a;this.K=b;this.s=null;this.j=166619935;this.u=0}f=Be.prototype;f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.W=function(a,b){return this.$(null,b,null)};f.C=function(a,b,c){return this.$(null,b,c)};f.V=function(a,b){if(0===b)return this.key;if(1===b)return this.K;throw Error("Index out of bounds");};
f.$=function(a,b,c){return 0===b?this.key:1===b?this.K:c};f.ob=function(a,b){return(new Jd(null,2,5,Kd,[this.key,this.K],null)).ob(a,b)};f.M=function(){return null};f.U=function(){return 2};f.Bb=function(){return this.key};f.Cb=function(){return this.K};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return null};f.ba=function(a,b){return tc(this,b)};
f.ca=function(a,b,c){a:{a=this.U(null);var d=c;for(c=0;;)if(c<a){var e=this.V(null,c);d=b.b?b.b(d,e):b.call(null,d,e);if(rc(d)){b=ib(d);break a}c+=1}else{b=d;break a}}return b};f.Ma=function(a,b,c){return Jc.i(new Jd(null,2,5,Kd,[this.key,this.K],null),b,c)};f.O=function(){return new gc([this.key,this.K],0,null)};f.S=function(a,b){return Nc(new Jd(null,2,5,Kd,[this.key,this.K],null),b)};f.Z=function(a,b){return new Jd(null,3,5,Kd,[this.key,this.K,b],null)};
f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.a=function(a){return this.V(null,a)};f.b=function(a,b){return this.$(null,a,b)};function pe(a){return null!=a?a.j&2048||u===a.Ub?!0:!1:!1}function Ce(a,b,c){this.c=a;this.m=b;this.sa=c;this.j=32374990;this.u=0}f=Ce.prototype;
f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.sa};f.X=function(){return this.m<this.c.length-2?new Ce(this.c,this.m+2,null):null};f.U=function(){return(this.c.length-this.m)/2};f.R=function(){return mc(this)};f.I=function(a,b){return Cc(this,b)};
f.G=function(){return ic};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return new Be(this.c[this.m],this.c[this.m+1])};f.ha=function(){return this.m<this.c.length-2?new Ce(this.c,this.m+2,null):ic};f.O=function(){return this};f.S=function(a,b){return b===this.sa?this:new Ce(this.c,this.m,b)};f.Z=function(a,b){return Z(b,this)};Ce.prototype[Ra]=function(){return lc(this)};function De(a,b){this.c=a;this.m=0;this.l=b}
De.prototype.ga=function(){return this.m<this.l};De.prototype.next=function(){var a=new Be(this.c[this.m],this.c[this.m+1]);this.m+=2;return a};function Pb(a,b,c,d){this.o=a;this.l=b;this.c=c;this.s=d;this.j=16647951;this.u=139268}f=Pb.prototype;f.toString=function(){return Ob(this)};f.keys=function(){return lc(Ee.a?Ee.a(this):Ee.call(null,this))};f.entries=function(){return new Ae(P(P(this)))};f.values=function(){return lc(Fe.a?Fe.a(this):Fe.call(null,this))};
f.has=function(a){return O.i(this,a,Vc)===Vc?!1:!0};f.get=function(a,b){return this.C(null,a,b)};f.forEach=function(a){for(var b=P(this),c=null,d=0,e=0;;)if(e<d){var g=c.V(null,e),h=Ic(g,0,null);g=Ic(g,1,null);a.b?a.b(g,h):a.call(null,g,h);e+=1}else if(b=P(b))Tc(b)?(c=Gb(b),b=Hb(b),h=c,d=W(c),c=h):(c=R(b),h=Ic(c,0,null),g=Ic(c,1,null),a.b?a.b(g,h):a.call(null,g,h),b=T(b),c=null,d=0),e=0;else return null};f.W=function(a,b){return this.C(null,b,null)};
f.C=function(a,b,c){a=Kc(this.c,b);return-1===a?c:this.c[a+1]};f.hb=function(a,b,c){a=this.c.length;for(var d=0;;)if(d<a){var e=this.c[d],g=this.c[d+1];c=b.i?b.i(c,e,g):b.call(null,c,e,g);if(rc(c))return ib(c);d+=2}else return c};f.ma=function(){return new De(this.c,2*this.l)};f.M=function(){return this.o};f.U=function(){return this.l};f.R=function(){var a=this.s;return null!=a?a:this.s=a=oc(this)};
f.I=function(a,b){if(Qc(b)&&!Rc(b))if(a=this.c.length,this.l===b.U(null))for(var c=0;;)if(c<a){var d=b.C(null,this.c[c],Vc);if(d!==Vc)if(jc.b(this.c[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};f.Va=function(){return new Ge(this.c.length,Sa(this.c))};f.G=function(){return lb(Md,this.o)};f.ba=function(a,b){return ad(this,b)};f.ca=function(a,b,c){return bd(this,b,c)};
f.Ma=function(a,b,c){a=Kc(this.c,b);if(-1===a){if(this.l<He){a=this.c;for(var d=a.length,e=Array(d+2),g=0;;)if(g<d)e[g]=a[g],g+=1;else break;e[d]=b;e[d+1]=c;return new Pb(this.o,this.l+1,e,null)}return lb(db(jg(Ie,this),b,c),this.o)}if(c===this.c[a+1])return this;b=Sa(this.c);b[a+1]=c;return new Pb(this.o,this.l,b,null)};f.O=function(){var a=this.c;return 0<=a.length-2?new Ce(a,0,null):null};f.S=function(a,b){return b===this.o?this:new Pb(b,this.l,this.c,this.s)};
f.Z=function(a,b){if(Sc(b))return this.Ma(null,Xa(b,0),Xa(b,1));a=this;for(b=P(b);;){if(null==b)return a;var c=R(b);if(Sc(c))a=db(a,Xa(c,0),Xa(c,1)),b=T(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};
f.a=function(a){return this.W(null,a)};f.b=function(a,b){return this.C(null,a,b)};var Md=new Pb(null,0,[],pc),He=8;Pb.prototype[Ra]=function(){return lc(this)};function Ge(a,b){this.Ua={};this.Pa=a;this.c=b;this.j=259;this.u=56}f=Ge.prototype;f.U=function(){if(this.Ua)return fd(this.Pa);throw Error("count after persistent!");};f.W=function(a,b){return this.C(null,b,null)};f.C=function(a,b,c){if(this.Ua)return a=Kc(this.c,b),-1===a?c:this.c[a+1];throw Error("lookup after persistent!");};
f.Ya=function(a,b){if(this.Ua){if(pe(b))return this.Ta(null,qe.a?qe.a(b):qe.call(null,b),re.a?re.a(b):re.call(null,b));if(Sc(b))return this.Ta(null,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));a=P(b);for(b=this;;){var c=R(a);if(y(c))a=T(a),b=Eb(b,qe.a?qe.a(c):qe.call(null,c),re.a?re.a(c):re.call(null,c));else return b}}else throw Error("conj! after persistent!");};f.ib=function(){if(this.Ua)return this.Ua=!1,new Pb(null,fd(this.Pa),this.c,null);throw Error("persistent! called twice");};
f.Ta=function(a,b,c){if(this.Ua){a=Kc(this.c,b);if(-1===a){if(this.Pa+2<=2*He)return this.Pa+=2,this.c.push(b),this.c.push(c),this;a=Je.b?Je.b(this.Pa,this.c):Je.call(null,this.Pa,this.c);return Eb(a,b,c)}c!==this.c[a+1]&&(this.c[a+1]=c);return this}throw Error("assoc! after persistent!");};f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};
f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.a=function(a){return this.C(null,a,null)};f.b=function(a,b){return this.C(null,a,b)};function Je(a,b){for(var c=Ab(Ie),d=0;;)if(d<a)c=Eb(c,b[d],b[d+1]),d+=2;else return c}function Ke(){this.K=!1}function Le(a,b){return a===b?!0:a===b||a instanceof ld&&b instanceof ld&&a.Ja===b.Ja?!0:jc.b(a,b)}function Me(a,b,c){a=Sa(a);a[b]=c;return a}function Ne(a,b,c,d){a=a.Na(b);a.c[c]=d;return a}
function Oe(a,b,c){for(var d=a.length,e=0,g=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.i?b.i(g,c,h):b.call(null,g,c,h)}else c=a[e+1],c=null!=c?c.ab(b,g):g;if(rc(c))return c;e+=2;g=c}else return g}function Pe(a){this.c=a;this.m=0;this.qa=this.bb=null}Pe.prototype.advance=function(){for(var a=this.c.length;;)if(this.m<a){var b=this.c[this.m],c=this.c[this.m+1];null!=b?b=this.bb=new Be(b,c):null!=c?(b=Mb(c),b=b.ga()?this.qa=b:!1):b=!1;this.m+=2;if(b)return!0}else return!1};
Pe.prototype.ga=function(){var a=null!=this.bb;return a?a:(a=null!=this.qa)?a:this.advance()};Pe.prototype.next=function(){if(null!=this.bb){var a=this.bb;this.bb=null;return a}if(null!=this.qa)return a=this.qa.next(),this.qa.ga()||(this.qa=null),a;if(this.advance())return this.next();throw Error("No such element");};Pe.prototype.remove=function(){return Error("Unsupported operation")};function Qe(a,b,c){this.D=a;this.T=b;this.c=c;this.u=131072;this.j=0}f=Qe.prototype;
f.Na=function(a){if(a===this.D)return this;var b=gd(this.T),c=Array(0>b?4:2*(b+1));Uc(this.c,0,c,0,2*b);return new Qe(a,this.T,c)};f.$a=function(){return Re?Re(this.c):Se.call(null,this.c)};f.ab=function(a,b){return Oe(this.c,a,b)};f.Oa=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.T&e))return d;var g=gd(this.T&e-1);e=this.c[2*g];g=this.c[2*g+1];return null==e?g.Oa(a+5,b,c,d):Le(c,e)?g:d};
f.oa=function(a,b,c,d,e,g){var h=1<<(c>>>b&31),k=gd(this.T&h-1);if(0===(this.T&h)){var l=gd(this.T);if(2*l<this.c.length){a=this.Na(a);b=a.c;g.K=!0;c=2*(l-k);g=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[g],--l,--c,--g;b[2*k]=d;b[2*k+1]=e;a.T|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Te.oa(a,b+5,c,d,e,g);for(e=d=0;;)if(32>d)0===(this.T>>>d&1)?
d+=1:(k[d]=null!=this.c[e]?Te.oa(a,b+5,cc(this.c[e]),this.c[e],this.c[e+1],g):this.c[e+1],e+=2,d+=1);else break;return new Ue(a,l+1,k)}b=Array(2*(l+4));Uc(this.c,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Uc(this.c,2*k,b,2*(k+1),2*(l-k));g.K=!0;a=this.Na(a);a.c=b;a.T|=h;return a}l=this.c[2*k];h=this.c[2*k+1];if(null==l)return l=h.oa(a,b+5,c,d,e,g),l===h?this:Ne(this,a,2*k+1,l);if(Le(d,l))return e===h?this:Ne(this,a,2*k+1,e);g.K=!0;g=b+5;d=Ve?Ve(a,g,l,h,c,d,e):We.call(null,a,g,l,h,c,d,e);e=2*k;k=2*k+1;a=this.Na(a);
a.c[e]=null;a.c[k]=d;return a};
f.na=function(a,b,c,d,e){var g=1<<(b>>>a&31),h=gd(this.T&g-1);if(0===(this.T&g)){var k=gd(this.T);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Te.na(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.T>>>c&1)?c+=1:(h[c]=null!=this.c[d]?Te.na(a+5,cc(this.c[d]),this.c[d],this.c[d+1],e):this.c[d+1],d+=2,c+=1);else break;return new Ue(null,k+1,h)}a=Array(2*(k+1));Uc(this.c,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Uc(this.c,2*h,a,2*(h+1),2*(k-h));e.K=!0;return new Qe(null,this.T|g,a)}var l=this.c[2*h];g=this.c[2*h+1];if(null==l)return k=g.na(a+5,b,c,d,e),k===g?this:new Qe(null,this.T,Me(this.c,2*h+1,k));if(Le(c,l))return d===g?this:new Qe(null,this.T,Me(this.c,2*h+1,d));e.K=!0;e=this.T;k=this.c;a+=5;a=Xe?Xe(a,l,g,b,c,d):We.call(null,a,l,g,b,c,d);c=2*h;h=2*h+1;d=Sa(k);d[c]=null;d[h]=a;return new Qe(null,e,d)};f.ma=function(){return new Pe(this.c)};var Te=new Qe(null,0,[]);
function Ye(a){this.c=a;this.m=0;this.qa=null}Ye.prototype.ga=function(){for(var a=this.c.length;;){if(null!=this.qa&&this.qa.ga())return!0;if(this.m<a){var b=this.c[this.m];this.m+=1;null!=b&&(this.qa=Mb(b))}else return!1}};Ye.prototype.next=function(){if(this.ga())return this.qa.next();throw Error("No such element");};Ye.prototype.remove=function(){return Error("Unsupported operation")};function Ue(a,b,c){this.D=a;this.l=b;this.c=c;this.u=131072;this.j=0}f=Ue.prototype;
f.Na=function(a){return a===this.D?this:new Ue(a,this.l,Sa(this.c))};f.$a=function(){return Ze?Ze(this.c):$e.call(null,this.c)};f.ab=function(a,b){for(var c=this.c.length,d=0;;)if(d<c){var e=this.c[d];if(null!=e){b=e.ab(a,b);if(rc(b))return b;d+=1}else d+=1}else return b};f.Oa=function(a,b,c,d){var e=this.c[b>>>a&31];return null!=e?e.Oa(a+5,b,c,d):d};
f.oa=function(a,b,c,d,e,g){var h=c>>>b&31,k=this.c[h];if(null==k)return a=Ne(this,a,h,Te.oa(a,b+5,c,d,e,g)),a.l+=1,a;b=k.oa(a,b+5,c,d,e,g);return b===k?this:Ne(this,a,h,b)};f.na=function(a,b,c,d,e){var g=b>>>a&31,h=this.c[g];if(null==h)return new Ue(null,this.l+1,Me(this.c,g,Te.na(a+5,b,c,d,e)));a=h.na(a+5,b,c,d,e);return a===h?this:new Ue(null,this.l,Me(this.c,g,a))};f.ma=function(){return new Ye(this.c)};function af(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Le(c,a[d]))return d;d+=2}else return-1}
function bf(a,b,c,d){this.D=a;this.Ia=b;this.l=c;this.c=d;this.u=131072;this.j=0}f=bf.prototype;f.Na=function(a){if(a===this.D)return this;var b=Array(2*(this.l+1));Uc(this.c,0,b,0,2*this.l);return new bf(a,this.Ia,this.l,b)};f.$a=function(){return Re?Re(this.c):Se.call(null,this.c)};f.ab=function(a,b){return Oe(this.c,a,b)};f.Oa=function(a,b,c,d){a=af(this.c,this.l,c);return 0>a?d:Le(c,this.c[a])?this.c[a+1]:d};
f.oa=function(a,b,c,d,e,g){if(c===this.Ia){b=af(this.c,this.l,d);if(-1===b){if(this.c.length>2*this.l)return b=2*this.l,c=2*this.l+1,a=this.Na(a),a.c[b]=d,a.c[c]=e,g.K=!0,a.l+=1,a;c=this.c.length;b=Array(c+2);Uc(this.c,0,b,0,c);b[c]=d;b[c+1]=e;g.K=!0;d=this.l+1;a===this.D?(this.c=b,this.l=d,a=this):a=new bf(this.D,this.Ia,d,b);return a}return this.c[b+1]===e?this:Ne(this,a,b+1,e)}return(new Qe(a,1<<(this.Ia>>>b&31),[null,this,null,null])).oa(a,b,c,d,e,g)};
f.na=function(a,b,c,d,e){return b===this.Ia?(a=af(this.c,this.l,c),-1===a?(a=2*this.l,b=Array(a+2),Uc(this.c,0,b,0,a),b[a]=c,b[a+1]=d,e.K=!0,new bf(null,this.Ia,this.l+1,b)):jc.b(this.c[a+1],d)?this:new bf(null,this.Ia,this.l,Me(this.c,a+1,d))):(new Qe(null,1<<(this.Ia>>>a&31),[null,this])).na(a,b,c,d,e)};f.ma=function(){return new Pe(this.c)};
function We(a){switch(arguments.length){case 6:return Xe(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Ve(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}function Xe(a,b,c,d,e,g){var h=cc(b);if(h===d)return new bf(null,h,2,[b,c,e,g]);var k=new Ke;return Te.na(a,h,b,c,k).na(a,d,e,g,k)}
function Ve(a,b,c,d,e,g,h){var k=cc(c);if(k===e)return new bf(null,k,2,[c,d,g,h]);var l=new Ke;return Te.oa(a,b,k,c,d,l).oa(a,b,e,g,h,l)}function cf(a,b,c,d,e){this.o=a;this.ra=b;this.m=c;this.B=d;this.s=e;this.j=32374988;this.u=0}f=cf.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){if(null==this.B){var a=this.ra,b=this.m+2;return df?df(a,b,null):Se.call(null,a,b,null)}a=this.ra;b=this.m;var c=T(this.B);return df?df(a,b,c):Se.call(null,a,b,c)};
f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return null==this.B?new Be(this.ra[this.m],this.ra[this.m+1]):R(this.B)};
f.ha=function(){var a=this,b=null==a.B?function(){var c=a.ra,d=a.m+2;return df?df(c,d,null):Se.call(null,c,d,null)}():function(){var c=a.ra,d=a.m,e=T(a.B);return df?df(c,d,e):Se.call(null,c,d,e)}();return null!=b?b:ic};f.O=function(){return this};f.S=function(a,b){return b===this.o?this:new cf(b,this.ra,this.m,this.B,this.s)};f.Z=function(a,b){return Z(b,this)};cf.prototype[Ra]=function(){return lc(this)};
function Se(a){switch(arguments.length){case 1:return Re(arguments[0]);case 3:return df(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}function Re(a){return df(a,0,null)}function df(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new cf(null,a,b,null,null);var d=a[b+1];if(y(d)&&(d=d.$a(),y(d)))return new cf(null,a,b+2,d,null);b+=2}else return null;else return new cf(null,a,b,c,null)}
function ef(a,b,c,d,e){this.o=a;this.ra=b;this.m=c;this.B=d;this.s=e;this.j=32374988;this.u=0}f=ef.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.o};f.X=function(){var a=this.ra,b=this.m,c=T(this.B);return ff?ff(a,b,c):$e.call(null,a,b,c)};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};
f.G=function(){return ic};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return R(this.B)};f.ha=function(){var a=this.ra;var b=this.m,c=T(this.B);a=ff?ff(a,b,c):$e.call(null,a,b,c);return null!=a?a:ic};f.O=function(){return this};f.S=function(a,b){return b===this.o?this:new ef(b,this.ra,this.m,this.B,this.s)};f.Z=function(a,b){return Z(b,this)};ef.prototype[Ra]=function(){return lc(this)};
function $e(a){switch(arguments.length){case 1:return Ze(arguments[0]);case 3:return ff(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length)].join(""));}}function Ze(a){return ff(a,0,null)}function ff(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(y(d)&&(d=d.$a(),y(d)))return new ef(null,a,b+1,d,null);b+=1}else return null;else return new ef(null,a,b,c,null)}function gf(a,b){this.ea=a;this.wb=b;this.pb=!1}
gf.prototype.ga=function(){return!this.pb||this.wb.ga()};gf.prototype.next=function(){if(this.pb)return this.wb.next();this.pb=!0;return new Be(null,this.ea)};gf.prototype.remove=function(){return Error("Unsupported operation")};function hf(a,b,c,d,e,g){this.o=a;this.l=b;this.root=c;this.ia=d;this.ea=e;this.s=g;this.j=16123663;this.u=139268}f=hf.prototype;f.toString=function(){return Ob(this)};f.keys=function(){return lc(Ee.a?Ee.a(this):Ee.call(null,this))};f.entries=function(){return new Ae(P(P(this)))};
f.values=function(){return lc(Fe.a?Fe.a(this):Fe.call(null,this))};f.has=function(a){return O.i(this,a,Vc)===Vc?!1:!0};f.get=function(a,b){return this.C(null,a,b)};f.forEach=function(a){for(var b=P(this),c=null,d=0,e=0;;)if(e<d){var g=c.V(null,e),h=Ic(g,0,null);g=Ic(g,1,null);a.b?a.b(g,h):a.call(null,g,h);e+=1}else if(b=P(b))Tc(b)?(c=Gb(b),b=Hb(b),h=c,d=W(c),c=h):(c=R(b),h=Ic(c,0,null),g=Ic(c,1,null),a.b?a.b(g,h):a.call(null,g,h),b=T(b),c=null,d=0),e=0;else return null};
f.W=function(a,b){return this.C(null,b,null)};f.C=function(a,b,c){return null==b?this.ia?this.ea:c:null==this.root?c:this.root.Oa(0,cc(b),b,c)};f.hb=function(a,b,c){a=this.ia?b.i?b.i(c,null,this.ea):b.call(null,c,null,this.ea):c;rc(a)?b=ib(a):null!=this.root?(b=this.root.ab(b,a),b=rc(b)?sc.a?sc.a(b):sc.call(null,b):b):b=a;return b};f.ma=function(){var a=this.root?Mb(this.root):Id();return this.ia?new gf(this.ea,a):a};f.M=function(){return this.o};f.U=function(){return this.l};
f.R=function(){var a=this.s;return null!=a?a:this.s=a=oc(this)};f.I=function(a,b){return ze(this,b)};f.Va=function(){return new jf(this.root,this.l,this.ia,this.ea)};f.G=function(){return lb(Ie,this.o)};f.Ma=function(a,b,c){if(null==b)return this.ia&&c===this.ea?this:new hf(this.o,this.ia?this.l:this.l+1,this.root,!0,c,null);a=new Ke;b=(null==this.root?Te:this.root).na(0,cc(b),b,c,a);return b===this.root?this:new hf(this.o,a.K?this.l+1:this.l,b,this.ia,this.ea,null)};
f.O=function(){if(0<this.l){var a=null!=this.root?this.root.$a():null;return this.ia?Z(new Be(null,this.ea),a):a}return null};f.S=function(a,b){return b===this.o?this:new hf(b,this.l,this.root,this.ia,this.ea,this.s)};f.Z=function(a,b){if(Sc(b))return this.Ma(null,Xa(b,0),Xa(b,1));a=this;for(b=P(b);;){if(null==b)return a;var c=R(b);if(Sc(c))a=db(a,Xa(c,0),Xa(c,1)),b=T(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};f.a=function(a){return this.W(null,a)};f.b=function(a,b){return this.C(null,a,b)};var Ie=new hf(null,0,null,!1,null,pc);hf.prototype[Ra]=function(){return lc(this)};
function jf(a,b,c,d){this.D={};this.root=a;this.count=b;this.ia=c;this.ea=d;this.j=259;this.u=56}function kf(a,b,c){if(a.D){if(null==b)a.ea!==c&&(a.ea=c),a.ia||(a.count+=1,a.ia=!0);else{var d=new Ke;b=(null==a.root?Te:a.root).oa(a.D,0,cc(b),b,c,d);b!==a.root&&(a.root=b);d.K&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}f=jf.prototype;f.U=function(){if(this.D)return this.count;throw Error("count after persistent!");};
f.W=function(a,b){return null==b?this.ia?this.ea:null:null==this.root?null:this.root.Oa(0,cc(b),b)};f.C=function(a,b,c){return null==b?this.ia?this.ea:c:null==this.root?c:this.root.Oa(0,cc(b),b,c)};
f.Ya=function(a,b){a:if(this.D)if(pe(b))a=kf(this,qe.a?qe.a(b):qe.call(null,b),re.a?re.a(b):re.call(null,b));else if(Sc(b))a=kf(this,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));else for(a=P(b),b=this;;){var c=R(a);if(y(c))a=T(a),b=kf(b,qe.a?qe.a(c):qe.call(null,c),re.a?re.a(c):re.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
f.ib=function(){if(this.D){this.D=null;var a=new hf(null,this.count,this.root,this.ia,this.ea,null)}else throw Error("persistent! called twice");return a};f.Ta=function(a,b,c){return kf(this,b,c)};f.call=function(a){switch(arguments.length-1){case 1:return this.a(arguments[1]);case 2:return this.b(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",G.a(arguments.length-1)].join(""));}};f.apply=function(a,b){return this.call.apply(this,[this].concat(Sa(b)))};
f.a=function(a){return this.W(null,a)};f.b=function(a,b){return this.C(null,a,b)};var lf=function lf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return lf.v(0<c.length?new gc(c.slice(0),0,null):null)};lf.v=function(a){for(var b=P(a),c=Ab(Ie);;)if(b){a=T(T(b));var d=R(b);b=R(T(b));c=Eb(c,d,b);b=a}else return Db(c)};lf.P=0;lf.J=function(a){return this.v(P(a))};function mf(a,b){this.w=a;this.sa=b;this.j=32374988;this.u=0}f=mf.prototype;f.toString=function(){return Ob(this)};
f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.sa};f.X=function(){var a=(null!=this.w?this.w.j&128||u===this.w.Wa||(this.w.j?0:F(Za,this.w)):F(Za,this.w))?this.w.X(null):T(this.w);return null==a?null:new mf(a,null)};f.R=function(){return mc(this)};
f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return this.w.da(null).key};f.ha=function(){var a=(null!=this.w?this.w.j&128||u===this.w.Wa||(this.w.j?0:F(Za,this.w)):F(Za,this.w))?this.w.X(null):T(this.w);return null!=a?new mf(a,null):ic};f.O=function(){return this};f.S=function(a,b){return b===this.sa?this:new mf(this.w,b)};f.Z=function(a,b){return Z(b,this)};mf.prototype[Ra]=function(){return lc(this)};
function Ee(a){return(a=P(a))?new mf(a,null):null}function qe(a){return fb(a)}function nf(a,b){this.w=a;this.sa=b;this.j=32374988;this.u=0}f=nf.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();f.M=function(){return this.sa};f.X=function(){var a=(null!=this.w?this.w.j&128||u===this.w.Wa||(this.w.j?0:F(Za,this.w)):F(Za,this.w))?this.w.X(null):T(this.w);return null==a?null:new nf(a,null)};f.R=function(){return mc(this)};
f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){return Xc(b,this)};f.ca=function(a,b,c){return $c(b,c,this)};f.da=function(){return this.w.da(null).K};f.ha=function(){var a=(null!=this.w?this.w.j&128||u===this.w.Wa||(this.w.j?0:F(Za,this.w)):F(Za,this.w))?this.w.X(null):T(this.w);return null!=a?new nf(a,null):ic};f.O=function(){return this};f.S=function(a,b){return b===this.sa?this:new nf(this.w,b)};f.Z=function(a,b){return Z(b,this)};nf.prototype[Ra]=function(){return lc(this)};
function Fe(a){return(a=P(a))?new nf(a,null):null}function re(a){return gb(a)}function og(a){return y(Xd(dd,a))?xd(function(b,c){return Ec.b(y(b)?b:Md,c)},a):null}function nd(a){if(null!=a&&(a.u&4096||u===a.Eb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",G.a(a)].join(""));}function of(a,b,c){this.start=a;this.step=b;this.count=c;this.j=82;this.u=0}f=of.prototype;f.U=function(){return this.count};f.da=function(){return this.start};
f.V=function(a,b){return this.start+b*this.step};f.$=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c};f.mb=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new of(this.start+this.step,this.step,this.count-1)};function pf(a,b,c){this.m=a;this.end=b;this.step=c}pf.prototype.ga=function(){return 0<this.step?this.m<this.end:this.m>this.end};pf.prototype.next=function(){var a=this.m;this.m+=this.step;return a};
function qf(a,b,c,d,e,g,h){this.o=a;this.start=b;this.end=c;this.step=d;this.Y=e;this.cb=g;this.s=h;this.j=32375006;this.u=140800}f=qf.prototype;f.toString=function(){return Ob(this)};f.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return V(this,b,0);case 2:return V(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return V(this,b,0)};a.b=function(b,c){return V(this,b,c)};return a}();
f.lastIndexOf=function(){function a(c){return X(this,c,W(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return X(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return X(this,c,d)};return b}();function rf(a){if(null==a.Y){var b=a.U(null);32<b?(a.cb=new qf(null,a.start+32*a.step,a.end,a.step,null,null,null),a.Y=new of(a.start,a.step,32)):a.Y=new of(a.start,a.step,b)}}
f.V=function(a,b){if(0<=b&&b<this.U(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};f.$=function(a,b,c){return 0<=b&&b<this.U(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c};f.ma=function(){return new pf(this.start,this.end,this.step)};f.M=function(){return this.o};
f.X=function(){return 0<this.step?this.start+this.step<this.end?new qf(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new qf(null,this.start+this.step,this.end,this.step,null,null,null):null};f.U=function(){return Math.ceil((this.end-this.start)/this.step)};f.R=function(){var a=this.s;return null!=a?a:this.s=a=mc(this)};f.I=function(a,b){return Cc(this,b)};f.G=function(){return ic};f.ba=function(a,b){return tc(this,b)};
f.ca=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.b?b.b(c,a):b.call(null,c,a);if(rc(c))return ib(c);a+=this.step}else return c};f.da=function(){return this.start};f.ha=function(){var a=this.X(null);return null==a?ic:a};f.O=function(){return this};f.eb=function(){rf(this);return this.Y};f.Sa=function(){rf(this);return null==this.cb?ic:this.cb};f.S=function(a,b){return b===this.o?this:new qf(b,this.start,this.end,this.step,this.Y,this.cb,this.s)};
f.Z=function(a,b){return Z(b,this)};f.nb=function(){return P(this.Sa(null))};qf.prototype[Ra]=function(){return lc(this)};function sf(a,b){return b<=a?ic:new qf(null,a,b,1,null,null,null)}
function tf(a,b,c,d,e,g,h){var k=Ja;Ja=null==Ja?null:Ja-1;try{if(null!=Ja&&0>Ja)return xb(a,"#");xb(a,c);if(0===Ub.a(g))P(h)&&xb(a,function(){var v=uf.a(g);return y(v)?v:"..."}());else{if(P(h)){var l=R(h);b.i?b.i(l,a,g):b.call(null,l,a,g)}for(var m=T(h),p=Ub.a(g)-1;;)if(!m||null!=p&&0===p){P(m)&&0===p&&(xb(a,d),xb(a,function(){var v=uf.a(g);return y(v)?v:"..."}()));break}else{xb(a,d);var q=R(m);c=a;h=g;b.i?b.i(q,c,h):b.call(null,q,c,h);var t=T(m);c=p-1;m=t;p=c}}return xb(a,e)}finally{Ja=k}}
function vf(a,b){b=P(b);for(var c=null,d=0,e=0;;)if(e<d){var g=c.V(null,e);xb(a,g);e+=1}else if(b=P(b))c=b,Tc(c)?(b=Gb(c),d=Hb(c),c=b,g=W(b),b=d,d=g):(g=R(c),xb(a,g),b=T(c),c=null,d=0),e=0;else return null}var wf={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function xf(a){return['"',G.a(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return wf[b]})),'"'].join("")}function yf(a,b){return Wc(O.b(a,Sb))?null!=b&&(b.j&131072||u===b.Db)?null!=Oc(b):!1:!1}
function zf(a,b,c){if(null==a)return xb(b,"nil");if(yf(c,a)){xb(b,"^");var d=Oc(a);Af.i?Af.i(d,b,c):Af.call(null,d,b,c);xb(b," ")}if(a.vb)return a.Ib(b);if(null!=a?a.j&2147483648||u===a.aa||(a.j?0:F(yb,a)):F(yb,a))return zb(a,b,c);if(!0===a||!1===a)return xb(b,G.a(a));if("number"===typeof a)return xb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":G.a(a));if(null!=a&&a.constructor===Object)return xb(b,"#js "),d=Rd.b(function(g){var h=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof g)h=h.exec(g),h=jc.b(R(h),g)?1===W(h)?R(h):oe(h):null;else throw new TypeError("re-matches must match against a string.");return new Be(null!=h?md.a(g):g,a[g])},Ba(a)),Bf.F?Bf.F(d,Af,b,c):Bf.call(null,d,Af,b,c);if(Oa(a))return tf(b,Af,"#js ["," ","]",c,a);if("string"==typeof a)return y(Rb.a(c))?xb(b,xf(a)):xb(b,a);if("function"==r(a)){var e=a.name;c=y(function(){var g=null==e;return g?g:/^[\s\xa0]*$/.test(e)}())?"Function":e;return vf(b,Dc(["#object[",c,y(!1)?[' "',G.a(a),'"'].join(""):
"","]"]))}if(a instanceof Date)return c=function(g,h){for(g=G.a(g);;)if(g.length<h)g=["0",g].join("");else return g},vf(b,Dc(['#inst "',G.a(a.getUTCFullYear()),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return vf(b,Dc(['#"',a.source,'"']));if(y(function(){var g=null==a?null:a.constructor;return null==g?null:g.jb}()))return vf(b,Dc(["#object[",
a.constructor.jb.replace(/\//g,"."),"]"]));e=function(){var g=null==a?null:a.constructor;return null==g?null:g.name}();c=y(function(){var g=null==e;return g?g:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?vf(b,Dc(["#object[",c,"]"])):vf(b,Dc(["#object[",c," ",G.a(a),"]"]))}function Af(a,b,c){var d=Cf.a(c);return y(d)?(c=Jc.i(c,Df,zf),d.i?d.i(a,b,c):d.call(null,a,b,c)):zf(a,b,c)}function ta(a){return a instanceof ec?ha.b(null,nd(a)):md.b(null,nd(a))}
function ua(a){if(y(!1)){var b=P(a),c=P(b),d=R(c);T(c);Ic(d,0,null);Ic(d,1,null);c=null==a?null:null!=a&&(a.j&4||u===a.H)?a.G(null):(null!=a?a.j&4||u===a.H||(a.j?0:F(aa,a)):F(aa,a))?ea(a):null;for(a=null;;){d=a;b=P(b);a=R(b);var e=T(b),g=a;a=Ic(g,0,null);b=Ic(g,1,null);if(y(g))if(a instanceof ld||a instanceof ec)if(y(d))if(jc.b(d,ia(a)))c=Jc.i(c,ta(a),b),a=d,b=e;else return null;else if(d=ia(a),y(d))c=Jc.i(c,ta(a),b),a=d,b=e;else return null;else return null;else return new Jd(null,2,5,Kd,[d,c],null)}}else return null}
function Ef(a,b,c,d,e){return tf(d,function(g,h,k){var l=fb(g);c.i?c.i(l,h,k):c.call(null,l,h,k);xb(h," ");g=gb(g);return c.i?c.i(g,h,k):c.call(null,g,h,k)},[G.a(a),"{"].join(""),", ","}",e,P(b))}function Bf(a,b,c,d){var e=Qc(a)?ua(a):null,g=Ic(e,0,null);e=Ic(e,1,null);return y(g)?Ef(["#:",G.a(g)].join(""),e,b,c,d):Ef(null,a,b,c,d)}gc.prototype.aa=u;gc.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};od.prototype.aa=u;od.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};
Be.prototype.aa=u;Be.prototype.N=function(a,b,c){return tf(b,Af,"["," ","]",c,this)};cf.prototype.aa=u;cf.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};Ce.prototype.aa=u;Ce.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};se.prototype.aa=u;se.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};kd.prototype.aa=u;kd.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};hf.prototype.aa=u;hf.prototype.N=function(a,b,c){return Bf(this,Af,b,c)};
ef.prototype.aa=u;ef.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};sd.prototype.aa=u;sd.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};Pd.prototype.aa=u;Pd.prototype.N=function(a,b,c){xb(b,"#object[cljs.core.Atom ");Af(new Pb(null,1,[Ff,this.state],null),b,c);return xb(b,"]")};nf.prototype.aa=u;nf.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};Qf.prototype.aa=u;Qf.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};Jd.prototype.aa=u;
Jd.prototype.N=function(a,b,c){return tf(b,Af,"["," ","]",c,this)};id.prototype.aa=u;id.prototype.N=function(a,b){return xb(b,"()")};Pb.prototype.aa=u;Pb.prototype.N=function(a,b,c){return Bf(this,Af,b,c)};qf.prototype.aa=u;qf.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};mf.prototype.aa=u;mf.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};Gc.prototype.aa=u;Gc.prototype.N=function(a,b,c){return tf(b,Af,"("," ",")",c,this)};
function pg(a){return Math.floor(Math.random()*a)}jc.b("nodejs","default")&&(ba=global);var Ub=new ld(null,"print-length","print-length",1931866356),If=new ld(null,"opaque","opaque",-1243552654),Qb=new ld(null,"flush-on-newline","flush-on-newline",-151457939),Ff=new ld(null,"val","val",128701612),Jf=new ld(null,"glyph","glyph",2119448117),Sb=new ld(null,"meta","meta",1499536964),qg=new ld(null,"map","map",1371690461),Kf=new ld(null,"blocking","blocking",1118148125),Lf=new ld(null,"pos","pos",-864607220),la=new ec(null,"meta33894","meta33894",-1518954775,null),Mf=new ld(null,"y","y",
-1757859776),Nf=new ld(null,"x","x",2099068185),Of=new ld(null,"floor","floor",1882041021),rg=new ld(null,"room-count","room-count",397308344),Pf=new ld(null,"wall","wall",-787661558),sg=new ld(null,"max-size","max-size",-874966132),Rf=new ld(null,"bound","bound",587617170),Df=new ld(null,"fallback-impl","fallback-impl",-1501286995),Sf=new ld(null,"height","height",1025178622),Rb=new ld(null,"readably","readably",1129599760),Tf=new ld(null,"width","width",-384071477),Cf=new ld(null,"alt-impl","alt-impl",
670969595),tg=new ld(null,"min-size","min-size",1058361905),Uf=new ld(null,"player","player",-97687400),va=new ld(null,"vision","vision",-642015178),Vf=new ld(null,"type","type",1174270348),wa=new ld(null,"visible","visible",-1024216805),Tb=new ld(null,"dup","dup",556298533),uf=new ld(null,"more-marker","more-marker",-14717935);var Wf={},Xf={},Yf=[];function Zf(a,b){var c=Xf[a];if(void 0!==c)return c;try{Yf.push(a);var d=Wf[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Wf[a]=d}if(e){delete shadow$provide[a];try{e.call(d,ba,Zf,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var g=b.globals;if(g)for(a=0;a<g.length;a++)window[g[a]]=d.exports}}}finally{Yf.pop()}return d.exports};var $f;$f=Zf(1,{});var ag=new Pb(null,3,[Of,new Pb(null,4,[Vf,Of,Kf,!1,If,!1,Jf,"."],null),Pf,new Pb(null,4,[Vf,Pf,Kf,!0,If,!0,Jf,"#"],null),Rf,new Pb(null,4,[Vf,Rf,Kf,!0,If,!0,Jf,"X"],null)],null);
function bg(a){return oe(function(){return function d(c){return new od(null,function(){for(;;){var e=P(c);if(e){var g=e;if(Tc(g)){var h=Gb(g),k=W(h),l=ja(k);return function(){for(var t=0;;)if(t<k){var v=Xa(h,t),C=Ic(v,0,null),E=Ic(v,1,null);ud(l,kg(function(K,S,Y){return function(fa,ra){return Jc.i(fa,Lf,new Jd(null,2,5,Kd,[ra,Y],null))}}(t,v,C,E,h,k,l,g,e),E));t+=1}else return!0}()?td(l.Y(),d(Hb(g))):td(l.Y(),null)}var m=R(g),p=Ic(m,0,null),q=Ic(m,1,null);return Z(kg(function(t,v){return function(C,
E){return Jc.i(C,Lf,new Jd(null,2,5,Kd,[E,v],null))}}(m,p,q,g,e),q),d(hc(g)))}return null}},null)}(Od(a))}())}function ug(a,b){return Yd.i(a,b,function(c){return og(Dc([c,ag.a?ag.a(Of):ag.call(null,Of)]))})}
function vg(a,b){var c=null!=b&&(b.j&64||u===b.Xa)?Fd(lf,b):b,d=O.b(c,Nf),e=O.b(c,Mf),g=O.b(c,Tf),h=O.b(c,Sf);return Yc(function(k,l){return ug(k,l)},a,function(){return function m(l){return new od(null,function(){for(var p=l;;){var q=P(p);if(q){var t=q,v=R(t);if(q=P(function(C,E,K,S,Y,fa,ra,Na,ma,n){return function z(x){return new od(null,function(A,B){return function(){for(;;){var D=P(x);if(D){if(Tc(D)){var H=Gb(D),I=W(H),J=ja(I);a:for(var M=0;;)if(M<I){var Q=Xa(H,M);J.add(new Jd(null,2,5,Kd,[B,
Q],null));M+=1}else{H=!0;break a}return H?td(J.Y(),z(Hb(D))):td(J.Y(),null)}J=R(D);return Z(new Jd(null,2,5,Kd,[B,J],null),z(hc(D)))}return null}}}(C,E,K,S,Y,fa,ra,Na,ma,n),null)}}(p,v,t,q,b,c,d,e,g,h)(sf(d+1,d+g-1))))return Wd.b(q,m(hc(p)));p=hc(p)}else return null}},null)}(sf(e+1,e+h-1))}())}function wg(a,b,c,d){return Yc(function(e,g){return ug(e,new Jd(null,2,5,Kd,[d,g],null))},a,sf(b<c?b:c,(b>c?b:c)+1))}
function xg(a,b,c,d){return Yc(function(e,g){return ug(e,new Jd(null,2,5,Kd,[g,d],null))},a,sf(b<c?b:c,(b>c?b:c)+1))}function yg(a){var b=null!=a&&(a.j&64||u===a.Xa)?Fd(lf,a):a;a=O.b(b,Nf);var c=O.b(b,Mf),d=O.b(b,Tf);b=O.b(b,Sf);return new Pb(null,2,[Nf,a+Math.round(d/2),Mf,c+Math.round(b/2)],null)}
function zg(a,b){var c=O.i(null,rg,30),d=O.i(null,sg,16),e=O.i(null,tg,6),g=bg(oe(dg(b,oe(dg(a,ag.a?ag.a(Pf):ag.call(null,Pf))))));c=Yc(function(k,l){return y(Xd(function(m){return Mf.a(l)<=Sf.a(m)+Mf.a(m)&&Sf.a(l)+Mf.a(l)>=Mf.a(m)&&Nf.a(l)<=Tf.a(m)+Nf.a(m)&&Tf.a(m)+Nf.a(m)>=Nf.a(l)},k))?k:Ec.b(k,l)},null,Ud(c,function(){var k=e+pg(d-e),l=e+pg(d-e);return new Pb(null,4,[Tf,k,Sf,l,Nf,1+pg(a-k-2),Mf,1+pg(b-l-2)],null)}));var h=Rd.i(ng,c,T(c));g=Yc(vg,g,c);g=Yc(function(k,l){var m=Ic(l,0,null);l=Ic(l,
1,null);m=new Jd(null,2,5,Kd,[m,l],null);m=Vd.a?Vd.a(m):Vd.call(null,m);l=Math.random;for(var p=m.length-1;0<p;p--){var q=Math.floor(l()*(p+1)),t=m[p];m[p]=m[q];m[q]=t}l=oe.a?oe.a(m):oe.call(null,m);m=Ic(l,0,null);p=Ic(l,1,null);m=yg(m);l=null!=m&&(m.j&64||u===m.Xa)?Fd(lf,m):m;m=O.b(l,Nf);l=O.b(l,Mf);p=yg(p);q=null!=p&&(p.j&64||u===p.Xa)?Fd(lf,p):p;p=O.b(q,Nf);q=O.b(q,Mf);return xg(wg(k,m,p,l),l,q,p)},g,h);return new Jd(null,2,5,Kd,[g,yg(R(c))],null)}
function Ag(){var a=eg,b=Ic(a,0,null);a=Ic(a,1,null);var c=zg(b,a),d=Ic(c,0,null);c=Ic(c,1,null);var e=null!=c&&(c.j&64||u===c.Xa)?Fd(lf,c):c;c=O.b(e,Nf);e=O.b(e,Mf);return new Pb(null,4,[Uf,new Pb(null,4,[Nf,c,Mf,e,Jf,"@",va,8],null),qg,d,Tf,b,Sf,a],null)};function xa(a,b,c){a=If.a(qa(a,new Jd(null,2,5,Kd,[c,b],null)));return null==a?!0:!1===a?!0:!1}function ya(a,b,c,d,e){return oa.F(a,sa,new Jd(null,3,5,Kd,[c,b,wa],null),jc.b(1,e))}
function za(a){return oe(function(){return function d(c){return new od(null,function(){for(;;){var e=P(c);if(e){var g=e;if(Tc(g)){var h=Gb(g),k=W(h),l=ja(k);return function(){for(var p=0;;)if(p<k){var q=Xa(h,p);ud(l,pa(function(){return function(t){return Jc.i(t,wa,!1)}}(p,q,h,k,l,g,e),q));p+=1}else return!0}()?td(l.Y(),d(Hb(g))):td(l.Y(),null)}var m=R(g);return Z(pa(function(){return function(p){return Jc.i(p,wa,!1)}}(m,g,e),m),d(hc(g)))}return null}},null)}(a)}())}
function Aa(a){a=null!=a&&(a.j&64||u===a.Xa)?Fd(lf,a):a;var b=O.b(a,qg),c=O.b(a,Uf),d=new $f.FOV.PreciseShadowcasting(na(xa,b));b=new Pd(za(b));var e=na(ya,b),g=va.a(c);d.compute(Nf.a(c),Mf.a(c),g,e);return Jc.i(a,qg,ib(b))};var fg=new Pd(null),eg=new Jd(null,2,5,Kd,[80,50],null);function gg(a,b){var c=Ic(b,0,null);b=Ic(b,1,null);return Yd.F(Yd.F(a,new Jd(null,2,5,Kd,[Uf,Nf],null),ed,c),new Jd(null,2,5,Kd,[Uf,Mf],null),ed,b)}
function hg(a){return window.addEventListener(a,function(b){var c=ib(fg);y(b)?(b=b.keyCode,b=jc.b(b,$f.KEYS.VK_K)?gg(c,new Jd(null,2,5,Kd,[0,-1],null)):jc.b(b,$f.KEYS.VK_J)?gg(c,new Jd(null,2,5,Kd,[0,1],null)):jc.b(b,$f.KEYS.VK_H)?gg(c,new Jd(null,2,5,Kd,[-1,0],null)):jc.b(b,$f.KEYS.VK_L)?gg(c,new Jd(null,2,5,Kd,[1,0],null)):c):b=c;b=Aa(b);jc.b(fg.fb(null),c)?(Qd(fg,b),c=!0):c=!1;return c})}
function ig(){$f.Display.Rect.cache=!0;var a=new $f.Display({fontFamily:"Menlo",width:R(eg),height:R(T(eg))}),b=a.getContainer();document.body.appendChild(b);Qd(fg,Aa(Ag()));(function d(){var e=ib(fg),g=qg.a(e);g=P(g);for(var h=null,k=0,l=0;;)if(l<k){var m=h.V(null,l);m=P(m);for(var p=null,q=0,t=0;;)if(t<q){var v=p.V(null,t),C=Lf.a(v),E=Ic(C,0,null);C=Ic(C,1,null);var K=wa.a(v);K=y(K)?"#ddd":"#555";a.draw(E,C,Jf.a(v),K);t+=1}else if(m=P(m))Tc(m)?(q=Gb(m),m=Hb(m),p=q,q=W(q)):(p=R(m),t=Lf.a(p),q=Ic(t,
0,null),t=Ic(t,1,null),v=wa.a(p),v=y(v)?"#ddd":"#555",a.draw(q,t,Jf.a(p),v),m=T(m),p=null,q=0),t=0;else break;l+=1}else if(g=P(g)){if(Tc(g))k=Gb(g),g=Hb(g),h=k,k=W(k);else{m=R(g);h=P(m);k=null;for(m=l=0;;)if(m<l)p=k.V(null,m),t=Lf.a(p),q=Ic(t,0,null),t=Ic(t,1,null),v=wa.a(p),v=y(v)?"#ddd":"#555",a.draw(q,t,Jf.a(p),v),m+=1;else if(h=P(h))Tc(h)?(l=Gb(h),h=Hb(h),k=l,l=W(l)):(k=R(h),m=Lf.a(k),l=Ic(m,0,null),m=Ic(m,1,null),p=wa.a(k),p=y(p)?"#ddd":"#555",a.draw(l,m,Jf.a(k),p),h=T(h),k=null,l=0),m=0;else break;
g=T(g);h=null;k=0}l=0}else break;e=Uf.a(e);h=null!=e&&(e.j&64||u===e.Xa)?Fd(lf,e):e;e=O.b(h,Nf);g=O.b(h,Mf);h=O.b(h,Jf);a.draw(e,g,h);return requestAnimationFrame(d)})();hg("keydown");return hg("keypress")}function Ca(){return ig()}var Ga=["yarl","core","main"],Ha=ba;Ga[0]in Ha||"undefined"==typeof Ha.execScript||Ha.execScript("var "+Ga[0]);for(var Ia;Ga.length&&(Ia=Ga.shift());)Ga.length||void 0===Ca?Ha=Ha[Ia]&&Ha[Ia]!==Object.prototype[Ia]?Ha[Ia]:Ha[Ia]={}:Ha[Ia]=Ca;ig();
}).call(this);